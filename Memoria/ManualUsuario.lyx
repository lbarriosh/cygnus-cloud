#LyX 2.0 created this file. For more info see http://www.lyx.org/
\lyxformat 413
\begin_document
\begin_header
\textclass memoir
\use_default_options true
\maintain_unincluded_children false
\language spanish
\language_package default
\inputencoding auto
\fontencoding global
\font_roman default
\font_sans default
\font_typewriter default
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100
\font_tt_scale 100

\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\float_placement H
\paperfontsize default
\spacing single
\use_hyperref false
\papersize default
\use_geometry true
\use_amsmath 1
\use_esint 1
\use_mhchem 1
\use_mathdots 1
\cite_engine basic
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\use_refstyle 1
\index Index
\shortcut idx
\color #008000
\end_index
\leftmargin 3cm
\topmargin 3cm
\rightmargin 3cm
\bottommargin 3cm
\secnumdepth 3
\tocdepth 3
\paragraph_separation skip
\defskip smallskip
\quotes_language english
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Chapter
Manual de usuario
\end_layout

\begin_layout Section
Requisitos mínimos
\end_layout

\begin_layout Standard
Cada servidor de la infraestructura de 
\emph on
CygnusCloud
\emph default
 desempeña uno de estos papeles:
\end_layout

\begin_layout Itemize

\series bold
servidor de máquinas virtuales
\series default
.
 Estos equipos alojan las máquinas virtuales activas de los usuarios.
 Asimismo, estas máquinas también se utilizan para crear y editar las configurac
iones de las máquinas virtuales.
\end_layout

\begin_layout Itemize

\series bold
servidor de 
\emph on
cluster
\series default
\emph default
.
 Estas máquinas realizan el balanceado de carga entre varios servidores
 de máquinas virtuales.
 También se ocupan de la gestión de estas máquinas.
\end_layout

\begin_layout Itemize

\series bold
repositorio de imágenes
\series default
.
 Estas máquinas almacenan las configuraciones de todas las máquinas virtuales
 que pueden utilizarse en la infraestructura.
\end_layout

\begin_layout Itemize

\series bold
servidor web
\series default
.
 Estas máquinas proporcionan una interfaz web que permite a los usuarios
 enviar peticiones a los servidores de 
\emph on
cluster
\emph default
.
\end_layout

\begin_layout Standard
En esta sección, empezaremos mostrando los requisitos mínimos que debe cumplir
 el 
\emph on
hardware
\emph default
 de cada una de estas máquinas, para posteriormente mostrar los requisitos
 
\emph on
software
\emph default
.
\end_layout

\begin_layout Subsection
Requisitos 
\emph on
hardware
\end_layout

\begin_layout Standard
Las máquinas que se utilicen como servidores de 
\emph on
cluster
\emph default
 o servidores web deben cumplir los siguientes requisitos mínimos:
\end_layout

\begin_layout Itemize
CPU Intel® Pentium 4® a 2,4 GHz o superior
\end_layout

\begin_layout Itemize
un mínimo de 512 
\emph on
megabytes
\emph default
 de memoria RAM.
 Se recomienda 1 GB para un funcionamiento óptimo.
\end_layout

\begin_layout Itemize
un 
\emph on
gigabyte
\emph default
 de espacio en disco
\end_layout

\begin_layout Itemize
tarjeta de red 
\emph on
fast ethernet
\emph default
.
 
\end_layout

\begin_layout Standard
Por otra parte, las máquinas que se utilicen como repositorios de imágenes
 tienen unos requisitos mínimos muy similares:
\end_layout

\begin_layout Itemize
CPU Intel® Pentium 4® a 2,4 GHz o superior
\end_layout

\begin_layout Itemize
un mínimo de 512 
\emph on
megabytes
\emph default
 de memoria RAM.
 Se recomienda 1 
\emph on
gigabyte
\emph default
 para un funcionamiento óptimo.
\end_layout

\begin_layout Itemize
un mínimo de 20 
\emph on
gigabytes
\emph default
 de espacio en disco.
\end_layout

\begin_layout Itemize
tarjeta de red 
\emph on
fast ethernet
\emph default
.
 
\end_layout

\begin_layout Standard
Por otro lado, las máquinas que se utilicen como servidores de máquinas
 virtuales deben cumplir los siguientes requisitos mínimos:
\end_layout

\begin_layout Itemize
CPU Intel® Core 2 Duo® E4400 o superior
\end_layout

\begin_layout Itemize
un mínimo de 2 
\emph on
gigabytes
\emph default
 de memoria RAM.
 Se recomiendan 4 GB para un funcionamiento óptimo.
\end_layout

\begin_layout Itemize
un mínimo de 30 
\emph on
gigabytes
\emph default
 de espacio en disco si sólo se desea alojar máquinas virtuales Linux.
 Si también se pretende alojar máquinas virtuales 
\emph on
Windows
\emph default
, se requiere un mínimo de 60 
\emph on
gigabytes 
\emph default
de espacio en disco.
\end_layout

\begin_layout Itemize
tarjeta de red 
\emph on
fast ethernet
\emph default
.
 
\end_layout

\begin_layout Standard
Finalmente, todas las máquinas de la infraestructura deben estar conectadas
 a una misma red, que deberá soportar, como mínimo, una tasa de transferencia
 de 100 
\emph on
megabits
\emph default
 por segundo.
\end_layout

\begin_layout Subsection
Requisitos 
\emph on
software
\end_layout

\begin_layout Standard
Todas las máquinas de la infraestructura deben tener instalado el sistema
 operativo 
\emph on
Linux
\emph default
.
 
\end_layout

\begin_layout Standard
En principio, los demonios de 
\emph on
CygnusCloud 
\emph default
deberían funcionar de forma correcta en cualquier distribución 
\emph on
Linux
\emph default
 publicada tras el mes de abril del año 2012.
 No obstante, por falta de tiempo, sólo hemos podido hacer pruebas con las
 distribuciones Ubuntu 12.04 LTS, Ubuntu 13.04, Debian 7, openSUSE 12.2 y openSUSE
 12.3.
\end_layout

\begin_layout Standard
En todas las máquinas de la infraestructura deberán estar instalados, además
 del sistema operativo, 
\end_layout

\begin_layout Itemize
una versión de la rama 2.7 del intérprete de 
\emph on
Python
\emph default
, igual o superior a la 2.7.3.
\end_layout

\begin_layout Itemize
la librería de red 
\emph on
twisted
\emph default
, versión 12.1.0 o superior.
\end_layout

\begin_layout Itemize
el gestor de bases de datos MariaDB, versión 5.5.31 o superior.
\end_layout

\begin_layout Itemize
las utilidades 
\family typewriter
mv
\family default
, 
\family typewriter
cp
\family default
 y 
\family typewriter
rm
\family default
.
\end_layout

\begin_layout Itemize
el conector 
\emph on
Python 
\emph default
de MySQL.
 Este puede descargarse desde
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
\align center

\family typewriter
\begin_inset CommandInset href
LatexCommand href
name "http://dev.mysql.com/downloads/connector/python/"
target "http://dev.mysql.com/downloads/connector/python/"

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
el conector MySQL 
\family typewriter
mysqldb
\family default
.
 
\end_layout

\begin_layout Itemize
la orden 
\family typewriter
openssl
\family default
.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status collapsed

\begin_layout Plain Layout

\series bold
\color red
Importante
\series default
\color inherit
:
\series bold
\color red
 
\series default
\color inherit
a causa de las limitaciones impuestas por 
\family typewriter
libvirt
\family default
 y por la librería 
\emph on
twisted
\emph default
, 
\emph on
no
\emph default
 es posible utilizar un intérprete de 
\emph on
Python
\emph default
 de la rama 3.x.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Por otra parte, en los repositorios de imágenes también deberán estar instalados
\end_layout

\begin_layout Itemize
el servidor FTP 
\family typewriter
pytfpdlib
\family default
.
 Este puede descargarse desde
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
\align center

\family typewriter
\begin_inset CommandInset href
LatexCommand href
name "http://code.google.com/p/pyftpdlib/"
target "http://code.google.com/p/pyftpdlib/"

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize
la utilidad 
\family typewriter
ethtool.
\end_layout

\begin_layout Standard
Finalmente, en los servidores de máquinas virtuales también debe estar instalado
 el siguiente 
\emph on
software
\emph default
 adicional:
\end_layout

\begin_layout Itemize
un 
\emph on
kernel
\emph default
 de la versión 3.2.0 o superior.
\end_layout

\begin_layout Itemize
el hipervisor de KVM correspondiente a la versión del 
\emph on
kernel
\emph default
 que se encuentra instalada.
\end_layout

\begin_layout Itemize
el sistema de virtualización QEMU, versión 1.4 o superior
\end_layout

\begin_layout Itemize
la librería 
\family typewriter
libvirt
\family default
, versión 1.0.6 o superior
\end_layout

\begin_layout Itemize
las utilidades 
\family typewriter
zip
\family default
 y 
\family typewriter
unzip
\family default
.
\end_layout

\begin_layout Section
Instrucciones de instalación y configuración en Ubuntu 12.04
\end_layout

\begin_layout Standard
La última versión de todos los subsistemas de 
\family typewriter
CygnusCloud
\family default
 puede descargarse desde
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset CommandInset href
LatexCommand href
name "http://cygnusclouducm.wordpress.com/descargas/"
target "http://cygnusclouducm.wordpress.com/descargas/"

\end_inset


\end_layout

\begin_layout Standard
\noindent
Al exponer el proceso de instalación de los distintos subsistemas de 
\emph on
CygnusCloud
\emph default
, asumiremos que el fichero .tar.gz que contiene los módulos de dicho subsistema
 ya se ha descargado en la máquina que se pretende utilizar.
\end_layout

\begin_layout Standard
\noindent
Por ejemplo, en el proceso de instalación del repositorio de imágenes, omitiremo
s el paso inicial, en el que se descarga el fichero comprimido 
\family typewriter
ImageRepository.tar.gz
\family default
 desde la página web 
\begin_inset CommandInset href
LatexCommand href
name "http://cygnusclouducm.wordpress.com/descargas/"
target "http://cygnusclouducm.wordpress.com/descargas/"

\end_inset

.
\end_layout

\begin_layout Subsection
Pasos comunes
\end_layout

\begin_layout Standard
Con independencia del papel que desempeñe la máquina en la infraestructura,
 siempre es necesario 
\end_layout

\begin_layout Enumerate
instalar el gestor de bases de datos MariaDB.
 Para ello, ejecutamos las órdenes
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
\align center
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "80col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout Plain Layout

\family typewriter
sudo apt-get install python-software-properties 
\end_layout

\begin_layout Plain Layout

\family typewriter
sudo apt-key adv --recv-keys 
\end_layout

\begin_layout Plain Layout

\family typewriter
\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset

--keyserver keyserver.ubuntu.com 0xcbcb082a1bb943db 
\end_layout

\begin_layout Plain Layout

\family typewriter
sudo add-apt-repository 
\end_layout

\begin_layout Plain Layout

\family typewriter
\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset

'deb http://mariadb.cu.be//repo/5.5/ubuntu precise main'
\end_layout

\begin_layout Plain Layout

\family typewriter
sudo apt-get update sudo apt-get install mariadb-server
\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
instalar el conector oficial de MySQL.
 Para ello,
\end_layout

\begin_deeper
\begin_layout Enumerate
descargamos el fichero 
\family typewriter
.tar
\family default
 desde 
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
\align center
\begin_inset CommandInset href
LatexCommand href
name "http://dev.mysql.com/downloads/connector/python/"
target "http://dev.mysql.com/downloads/connector/python/"

\end_inset


\end_layout

\begin_layout Standard
Para que aparezca el enlace de descarga, debemos seleccionar 
\family sans
Source Code
\family default
 en el 
\emph on
combobox
\emph default
 que aparece en la página.
\end_layout

\end_deeper
\begin_layout Enumerate
extraemos el fichero 
\family typewriter
.tar
\family default
 mediante la orden
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
\align center

\family typewriter
tar xvzf mysql-connector-python-1.0.10.tar.gz -C <ruta del directorio de extracción>
\end_layout

\end_deeper
\begin_layout Enumerate
navegamos hasta el directorio en el que hemos extraído el fichero 
\family typewriter
.tar
\family default
.
 Acto seguido, ejecutamos los comandos
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "60col%"
special "none"
height "1in"
height_special "totalheight"
status collapsed

\begin_layout Plain Layout

\family typewriter
python setup.py build
\end_layout

\begin_layout Plain Layout

\family typewriter
sudo python setup.py install
\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
instalar la librería de red 
\emph on
twisted
\emph default
.
 y el conector MySQL 
\family typewriter
MysqlDB
\family default
.
 Para ello, ejecutamos la orden
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
\align center

\family typewriter
sudo apt-get install python-twisted python-mysqldb
\end_layout

\end_deeper
\begin_layout Subsection
Repositorio de imágenes
\end_layout

\begin_layout Subsubsection
Instalación y configuración del software adicional requerido
\end_layout

\begin_layout Standard
Una vez instalados los componentes comunes, en el repositorio de imágenes
 también es necesario instalar el servidor FTP 
\family typewriter
pyftpdlib
\family default
 y la orden 
\family typewriter
ethtool
\family default
.
 Para ello, seguimos los siguientes pasos:
\end_layout

\begin_layout Enumerate
descargamos el fichero 
\family typewriter
.tar
\family default
 desde 
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
\align center
\begin_inset CommandInset href
LatexCommand href
name "http://pyftpdlib.googlecode.com/files/pyftpdlib-1.0.1.tar.gz"
target "http://pyftpdlib.googlecode.com/files/pyftpdlib-1.0.1.tar.gz"

\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
extraemos dicho fichero.
 Para ello, ejecutamos la orden 
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
\align center

\family typewriter
tar xvzf pyftpdlib-1.0.1.tar.gz -C <ruta del directorio de extracción>
\end_layout

\end_deeper
\begin_layout Enumerate
navegamos hasta el directorio en el que hemos extraído el contenido del
 fichero 
\family typewriter
.tar
\family default
.
 Acto seguido, ejecutamos los comandos
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
\align center
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "60col%"
special "none"
height "1in"
height_special "totalheight"
status collapsed

\begin_layout Plain Layout

\family typewriter
python setup.py build
\end_layout

\begin_layout Plain Layout

\family typewriter
sudo python setup.py install
\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
ejecutamos el comando 
\end_layout

\begin_layout Standard
\noindent
\align center

\family typewriter
sudo apt-get install ethtool
\end_layout

\begin_layout Subsubsection
Instalación del módulo de 
\emph on
CygnusCloud 
\begin_inset CommandInset label
LatexCommand label
name "sub:Instalación-del-módulo"

\end_inset


\end_layout

\begin_layout Standard
Los pasos a seguir son los siguientes:
\end_layout

\begin_layout Enumerate
descomprimimos el fichero 
\family typewriter
ImageRepository.tar.gz
\family default
 en el directorio de instalación.
 Para ello, ejecutamos la orden
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
\align center

\family typewriter
tar xvzf ImageRepository.tar.gz -C <ruta del directorio de instalación>
\end_layout

\end_deeper
\begin_layout Enumerate
tomamos posesión de todos los ficheros extraídos.
 Para ello, ejecutamos la orden
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
\align center

\family typewriter
sudo chown -R <nuestro usuario>:<nuestro usuario> <ruta del directorio de
 instalación>
\end_layout

\end_deeper
\begin_layout Enumerate
ejecutamos el 
\emph on
script
\emph default
 
\family typewriter
build.py
\family default
, ubicado en la raíz del directorio de instalación.
 Para ello, utilizamos el comando
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
\align center

\family typewriter
python build.py
\end_layout

\begin_layout Standard
o el comando
\end_layout

\begin_layout Standard
\noindent
\align center

\family typewriter
sh build.py
\end_layout

\begin_layout Standard
El 
\emph on
script
\emph default
 comprobará que se satisfacen todas las dependencias e informará de los
 errores que detecte.
 
\end_layout

\end_deeper
\begin_layout Enumerate
si se satisfacen las dependencias, el 
\emph on
script 
\emph default
generará el fichero 
\family typewriter
imageRepository.sh
\family default
.
 Este fichero es el 
\emph on
script
\emph default
 de arranque del demonio del repositorio de imágenes.
\end_layout

\begin_layout Subsubsection
Configuración del módulo de 
\emph on
CygnusCloud 
\end_layout

\begin_layout Standard
Si intentamos arrancar el demonio del repositorio de imágenes sin haber
 inicializado previamente su fichero de configuración, se generará un mensaje
 de error.
 El fichero de configuración de este demonio, 
\family typewriter
ImageRepository_settings.conf
\family default
, se encuentra en la raíz del directorio de instalación.
 
\end_layout

\begin_layout Standard
El formato de todos los ficheros de configuración es el siguiente:
\end_layout

\begin_layout Itemize
las líneas que empiezan por almohadilla (
\family typewriter
#
\family default
) o por punto y coma (
\family typewriter
;
\family default
) son comentarios.
 Los comentarios de línea también están soportados.
\end_layout

\begin_layout Itemize
las cadenas de caracteres rodeadas por corchetes (
\family typewriter
[]
\family default
) son encabezados de sección.
 
\series bold
No
\series default
 deben modificarse jamás.
\end_layout

\begin_layout Itemize
el resto de líneas del fichero de configuración son de la forma 
\begin_inset Formula $\texttt{parámetro}\texttt{ = }\texttt{valor}$
\end_inset

.
 Si no aparece ningún valor a la derecha del símbolo 
\begin_inset Formula $\texttt{=}$
\end_inset

, el valor asociado al parámetro será la cadena vacía.
\end_layout

\begin_layout Standard
El contenido inicial del fichero de configuración del repositorio de imágenes
 aparece en la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Contenido-inicial-IR"

\end_inset

.
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status collapsed

\begin_layout Plain Layout

\family typewriter
# Comment or delete the following line after initializing this file 
\end_layout

\begin_layout Plain Layout

\family typewriter
[Uninitialized file]
\end_layout

\begin_layout Plain Layout

\family typewriter
[Database configuration] 
\end_layout

\begin_layout Plain Layout

\family typewriter
mysqlRootsPassword = 
\end_layout

\begin_layout Plain Layout

\family typewriter
dbUser = cygnuscloud 
\end_layout

\begin_layout Plain Layout

\family typewriter
dbUserPassword = cygnuscloud
\end_layout

\begin_layout Plain Layout

\family typewriter
[Network configuration] 
\end_layout

\begin_layout Plain Layout

\family typewriter
useSSL = False 
\end_layout

\begin_layout Plain Layout

\family typewriter
certificatePath = /home/luis/Infraestructura/Certificates 
\end_layout

\begin_layout Plain Layout

\family typewriter
commandsPort = 3000
\end_layout

\begin_layout Plain Layout

\family typewriter
[FTP Server configuration] 
\end_layout

\begin_layout Plain Layout

\family typewriter
FTPListenningInterface = eth0 
\end_layout

\begin_layout Plain Layout

\family typewriter
FTPPort = 2121 
\end_layout

\begin_layout Plain Layout

\family typewriter
maxConnections = 10 
\end_layout

\begin_layout Plain Layout

\family typewriter
maxConnectionsPerIP = 1 
\end_layout

\begin_layout Plain Layout

\family typewriter
uploadBandwidthRatio = 0.9 
\end_layout

\begin_layout Plain Layout

\family typewriter
downloadBandwidthRatio = 0.9 
\end_layout

\begin_layout Plain Layout

\family typewriter
FTPRootDirectory = /home/luis/Infraestructura/ImageRepository 
\end_layout

\begin_layout Plain Layout

\family typewriter
FTPPasswordLength = 20 
\end_layout

\begin_layout Plain Layout

\family typewriter
FTPUserName = cygnuscloud
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Contenido-inicial-IR"

\end_inset

Contenido inicial del fichero 
\family typewriter
ImageRepository_settings.conf
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
En primer lugar, la sección 
\family typewriter
Database configuration
\family default
 especifica la información que se utilizará para configurar la base de datos
 del repositorio de imágenes: la contraseña del usuario 
\emph on
root
\emph default
 y el nombre y la contraseña del usuario que empleará el demonio.
\end_layout

\begin_layout Standard
Por otra parte, la sección 
\family typewriter
Network configuration
\family default
 especifica la configuración de la conexión de control.
 En ella, se indicará si se desea cifrar el tráfico de esta conexión, la
 ruta de los certificados 
\family typewriter
server.crt
\family default
 y 
\family typewriter
server.key
\family default
 (sólo se utilizará cuando se cifra el tráfico) y el puerto asociado a la
 conexión de control.
\end_layout

\begin_layout Standard
Asimismo, la sección 
\family typewriter
FTP Server configuration
\family default
 especifica la configuración del servidor FTP que reside en el repositorio
 de imágenes.
 En ella, se indicará
\end_layout

\begin_layout Itemize
la interfaz de red por la que circulará el tráfico FTP.
\end_layout

\begin_layout Itemize
el puerto del servidor FTP.
\end_layout

\begin_layout Itemize
el número máximo de conexiones activas en total y el número máximo de conexiones
 activas de cada dirección IP.
\end_layout

\begin_layout Itemize
la fracción del ancho de banda de bajada y del ancho de banda de subida
 que podrá ser utilizada por el tráfico FTP.
\end_layout

\begin_layout Itemize
la ruta del directorio raíz del servidor FTP.
\end_layout

\begin_layout Itemize
el nombre de usuario y la longitud de la contraseña a utilizar.
 Las contraseñas se generan aleatoriamente en cada arranque.
\end_layout

\begin_layout Standard
Finalmente, tras inicializar el contenido de este fichero, debemos borrar
 o comentar la sección 
\family typewriter
Uninitialized file
\family default
.
 
\end_layout

\begin_layout Subsection
Servidores de máquinas virtuales
\end_layout

\begin_layout Subsubsection
Instalación y configuración de KVM
\end_layout

\begin_layout Standard
Una vez instalados los paquetes comunes, en los servidores de máquinas virtuales
 debemos instalar el hipervisor KVM, la librería 
\family typewriter
libvirt
\family default
\emph on
 
\emph default
y el sistema de virtualización QEMU.
 Para ello, ejecutamos la orden
\end_layout

\begin_layout Standard
\noindent
\align center

\family typewriter
sudo apt-get install qemu-kvm libvirt-bin ubuntu-vm-builder bridge-utils
\end_layout

\begin_layout Standard
Tras instalar estos paquetes, es necesario añadir el usuario que vamos a
 utilizar a los grupos 
\family typewriter
libvirtd
\family default
 y 
\family typewriter
kvm
\family default
.
 Para ello, ejecutamos las órdenes
\end_layout

\begin_layout Standard
\noindent
\align center

\family typewriter
sudo addgroup <nombre de nuestro usuario> libvirtd
\end_layout

\begin_layout Standard
y
\end_layout

\begin_layout Standard
\noindent
\align center

\family typewriter
sudo addgroup <nombre de nuestro usuario> kvm
\end_layout

\begin_layout Standard
Además, debemos configurar 
\family typewriter
libvirt
\family default
 para que nos permita crear máquinas y redes virtuales sin necesidad de
 ser 
\emph on
root
\emph default
.
 Para ello, descomentamos las siguientes líneas del fichero 
\family typewriter
/etc/libvirt/libvirtd.conf
\family default
:
\end_layout

\begin_layout Itemize

\family typewriter
unix_sock_group = "libvirtd"
\end_layout

\begin_layout Itemize

\family typewriter
unix_sock_ro_perms = "0777" 
\end_layout

\begin_layout Itemize

\family typewriter
unix_sock_rw_perms = "0770"
\end_layout

\begin_layout Itemize

\family typewriter
auth_unix_ro = "none"
\end_layout

\begin_layout Itemize

\family typewriter
auth_unix_rw = "none" 
\end_layout

\begin_layout Standard
Finalmente, reiniciamos el demonio de 
\family typewriter
libvirt
\family default
 mediante el comando
\end_layout

\begin_layout Standard
\noindent
\align center

\family typewriter
sudo service libvirtd restart
\end_layout

\begin_layout Standard
y reiniciamos nuestra sesión.
 A partir de este momento, podremos crear máquinas virtuales con nuestro
 usuario.
\end_layout

\begin_layout Subsubsection
Instalación del módulo de 
\emph on
CygnusCloud 
\end_layout

\begin_layout Standard
Los pasos a seguir son los siguientes:
\end_layout

\begin_layout Enumerate
descomprimimos el fichero 
\family typewriter
VirtualMachineServer.tar.gz
\family default
 en el directorio de instalación.
 Para ello, ejecutamos la orden
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
\align center

\family typewriter
tar xvzf VirtualMachineServer.tar.gz -C <ruta del directorio de instalación>
\end_layout

\end_deeper
\begin_layout Enumerate
tomamos posesión de todos los ficheros extraídos.
 Para ello, ejecutamos la orden
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
\align center

\family typewriter
sudo chown -R <nuestro usuario>:<nuestro usuario> <ruta del directorio de
 instalación>
\end_layout

\end_deeper
\begin_layout Enumerate
ejecutamos el 
\emph on
script
\emph default
 
\family typewriter
build.py
\family default
, ubicado en la raíz del directorio de instalación.
 Para ello, utilizamos el comando
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
\align center

\family typewriter
python build.py
\end_layout

\begin_layout Standard
o el comando
\end_layout

\begin_layout Standard
\noindent
\align center

\family typewriter
sh build.py
\end_layout

\begin_layout Standard
El 
\emph on
script
\emph default
 comprobará que se satisfacen todas las dependencias e informará de los
 errores que detecte.
 
\end_layout

\end_deeper
\begin_layout Enumerate
si se satisfacen las dependencias, el 
\emph on
script 
\emph default
generará el fichero 
\family typewriter
virtualMachineServer.sh
\family default
.
 Este fichero es el 
\emph on
script
\emph default
 de arranque del demonio del servidor de máquinas virtuales.
\end_layout

\begin_layout Subsubsection
Configuración del módulo de 
\emph on
CygnusCloud 
\end_layout

\begin_layout Standard
Si intentamos arrancar el demonio del servidor de máquinas virtuales sin
 haber inicializado previamente su fichero de configuración, se generará
 un mensaje de error.
 El fichero de configuración de este demonio, 
\family typewriter
VMServer_settings.conf
\family default
, se encuentra en la raíz del directorio de instalación.
 Su contenido inicial aparece en la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Contenido-inicial-VM"

\end_inset

.
 
\end_layout

\begin_layout Standard
Debemos recordar que, tras inicializar el contenido de este fichero, debemos
 borrar o comentar la sección 
\family typewriter
Uninitialized file
\family default
.
 
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status collapsed

\begin_layout Plain Layout

\family typewriter
# Comment or delete the following line after initializing this file 
\end_layout

\begin_layout Plain Layout

\family typewriter
[Uninitialized file]
\end_layout

\begin_layout Plain Layout

\family typewriter
[Database configuration] 
\end_layout

\begin_layout Plain Layout

\family typewriter
mysqlRootsPassword = 
\end_layout

\begin_layout Plain Layout

\family typewriter
databaseUserName = cygnuscloud 
\end_layout

\begin_layout Plain Layout

\family typewriter
databasePassword = cygnuscloud
\end_layout

\begin_layout Plain Layout

\family typewriter
[Virtual Network Configuration] 
\end_layout

\begin_layout Plain Layout

\family typewriter
createVirtualNetworkAsRoot = True 
\end_layout

\begin_layout Plain Layout

\family typewriter
vnName = ccnet 
\end_layout

\begin_layout Plain Layout

\family typewriter
gatewayIP = 192.168.77.1 
\end_layout

\begin_layout Plain Layout

\family typewriter
netMask = 255.255.255.0 
\end_layout

\begin_layout Plain Layout

\family typewriter
dhcpStartIP = 192.168.77.2 
\end_layout

\begin_layout Plain Layout

\family typewriter
dhcpEndIP = 192.168.77.254
\end_layout

\begin_layout Plain Layout

\family typewriter
[VNC server configuration] 
\end_layout

\begin_layout Plain Layout

\family typewriter
vncNetworkInterface = eth0 
\end_layout

\begin_layout Plain Layout

\family typewriter
passwordLength = 46
\end_layout

\begin_layout Plain Layout

\family typewriter
useQEMUWebsockets = False
\end_layout

\begin_layout Plain Layout

\family typewriter
websockifyPath = /home/luis/Infraestructura/websockify
\end_layout

\begin_layout Plain Layout

\family typewriter
[FTP Client Configuration] 
\end_layout

\begin_layout Plain Layout

\family typewriter
FTPTimeout = 100 
\end_layout

\begin_layout Plain Layout

\family typewriter
MaxTransferAttempts = 5
\end_layout

\begin_layout Plain Layout

\family typewriter
[Network configuration] 
\end_layout

\begin_layout Plain Layout

\family typewriter
useSSL = False 
\end_layout

\begin_layout Plain Layout

\family typewriter
certificatePath = /home/luis/Infraestructura/Certificates 
\end_layout

\begin_layout Plain Layout

\family typewriter
listenningPort = 15800
\end_layout

\begin_layout Plain Layout

\family typewriter
[Paths] 
\end_layout

\begin_layout Plain Layout

\family typewriter
configFilePath = /home/luis/Infraestructura/VirtualMachineServer/configuraciones
/ 
\end_layout

\begin_layout Plain Layout

\family typewriter
sourceImagePath = /home/luis/Infraestructura/VirtualMachineServer/imagenes/
\end_layout

\begin_layout Plain Layout

\family typewriter
executionImagePath = /home/luis/Infraestructura/VirtualMachineServer/imagenes_en
_ejecucion/ 
\end_layout

\begin_layout Plain Layout

\family typewriter
TransferDirectory = /home/luis/Infraestructura/VirtualMachineServer/Transfers
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Contenido-inicial-VM"

\end_inset

Contenido inicial del fichero 
\family typewriter
VMServer_settings.conf
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
En primer lugar, la sección 
\family typewriter
Database configuration
\family default
 especifica la información que se utilizará para configurar la base de datos
 del servidor de máquinas virtuales: la contraseña del usuario 
\emph on
root
\emph default
 y el nombre y la contraseña del usuario que empleará el demonio.
\end_layout

\begin_layout Standard
Por otra parte, la sección 
\family typewriter
Virtual Network Configuration
\family default
 especifica la configuración de la red virtual que alberga el servidor de
 máquinas virtuales.
 En ella, se indica
\end_layout

\begin_layout Itemize
si la red virtual se debe crear como un usuario normal o como el usuario
 
\emph on
root
\emph default
,
\end_layout

\begin_layout Itemize
el nombre de la red virtual,
\end_layout

\begin_layout Itemize
la dirección IP y la máscara de red del encaminador predeterminado de dicha
 red, y
\end_layout

\begin_layout Itemize
el rango de direcciones IP que asignará el servidor DHCP.
\end_layout

\begin_layout Standard
Por otro lado, la sección 
\family typewriter
VNC server configuration
\family default
 especifica 
\end_layout

\begin_layout Itemize
la interfaz de red por la que circulará el tráfico VNC,
\end_layout

\begin_layout Itemize
la longitud de las contraseñas de los servidores VNC que residen en este
 servidor de máquinas virtuales,
\end_layout

\begin_layout Itemize
qué 
\emph on
software
\emph default
 utilizamos para crear los 
\emph on
websockets
\emph default
 (QEMU o 
\family typewriter
websockify
\family default
), y
\end_layout

\begin_layout Itemize
la ruta del proceso 
\family typewriter
websockify
\family default
.
 El valor de este último parámetro sólo se utiliza cuando los 
\emph on
websockets
\emph default
 se crean mediante 
\family typewriter
websockify
\family default
.
\end_layout

\begin_layout Standard
La sección 
\family typewriter
FTP Client Configuration
\family default
 especifica el 
\emph on
timeout
\emph default
 y el número de veces que se reintentará realizar una transferencia fallida
 con el repositorio de imágenes.
\end_layout

\begin_layout Standard
Asimismo, la sección 
\family typewriter
Network configuration
\family default
 especifica la configuración de la conexión de control.
 En ella, se indicará si se desea cifrar el tráfico de esta conexión, la
 ruta de los certificados 
\family typewriter
server.crt
\family default
 y 
\family typewriter
server.key
\family default
 (sólo se utilizará cuando se cifra el tráfico) y el puerto asociado a la
 conexión de control.
\end_layout

\begin_layout Standard
Finalmente, la sección 
\family typewriter
Paths
\family default
 especifica las rutas de los diversos directorios de trabajo del servidor
 de máquinas virtuales en los que se almacenan 
\end_layout

\begin_layout Itemize
los ficheros de definición, los ficheros de imagen y los ficheros de imagen
 que utilizan las máquinas virtuales durante su ejecución, y 
\end_layout

\begin_layout Itemize
los ficheros 
\family typewriter
.zip
\family default
 que se intercambian con el repositorio de imágenes.
\end_layout

\begin_layout Subsection
Servidores de cluster
\end_layout

\begin_layout Subsubsection
Instalación del módulo de 
\emph on
CygnusCloud
\end_layout

\begin_layout Standard
La instalación del módulo es totalmente análoga a la de la sección 
\begin_inset CommandInset ref
LatexCommand ref
reference "sub:Instalación-del-módulo"

\end_inset

, aunque en este caso
\end_layout

\begin_layout Itemize
el fichero 
\family typewriter
.tar.gz
\family default
 se llama 
\family typewriter
ClusterServer.tar.gz
\end_layout

\begin_layout Itemize
el 
\emph on
script 
\family typewriter
\emph default
build.py
\family default
 genera el fichero 
\family typewriter
clusterServer.sh
\family default
.
\end_layout

\begin_layout Subsubsection
Configuración del módulo de 
\emph on
CygnusCloud
\end_layout

\begin_layout Standard
Si intentamos arrancar el demonio del servidor de 
\emph on
cluster
\emph default
 sin haber inicializado previamente su fichero de configuración, se generará
 un mensaje de error.
 El fichero de configuración de este demonio, 
\family typewriter
ClusterServer_settings.conf
\family default
, se encuentra en la raíz del directorio de instalación.
 Su contenido inicial aparece en la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Contenido-inicial-VM-1"

\end_inset

.
 
\end_layout

\begin_layout Standard
Debemos recordar que, tras inicializar el contenido de este fichero, debemos
 borrar o comentar la sección 
\family typewriter
Uninitialized file
\family default
.
 
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout Plain Layout

\family typewriter
# Comment or delete the following line after initializing this file 
\end_layout

\begin_layout Plain Layout

\family typewriter
[Uninitialized file]
\end_layout

\begin_layout Plain Layout

\family typewriter
[Database configuration] 
\end_layout

\begin_layout Plain Layout

\family typewriter
mysqlRootsPassword = 
\end_layout

\begin_layout Plain Layout

\family typewriter
dbUser = cygnuscloud 
\end_layout

\begin_layout Plain Layout

\family typewriter
dbUserPassword = cygnuscloud
\end_layout

\begin_layout Plain Layout

\family typewriter
[Network configuration] 
\end_layout

\begin_layout Plain Layout

\family typewriter
useSSL = False 
\end_layout

\begin_layout Plain Layout

\family typewriter
certificatePath = /home/luis/Infraestructura/Certificates 
\end_layout

\begin_layout Plain Layout

\family typewriter
listenningPort = 9000
\end_layout

\begin_layout Plain Layout

\family typewriter
[Load balancer configuration] 
\end_layout

\begin_layout Plain Layout

\family typewriter
loadBalancingAlgorithm = penalty-based # The simple load balancing algorithm
 is no longer supported 
\end_layout

\begin_layout Plain Layout

\family typewriter
vCPUsWeight = 0.2 
\end_layout

\begin_layout Plain Layout

\family typewriter
vCPUsExcessThreshold = 0.2 
\end_layout

\begin_layout Plain Layout

\family typewriter
ramWeight = 0.3 
\end_layout

\begin_layout Plain Layout

\family typewriter
storageSpaceWeight = 0.2 
\end_layout

\begin_layout Plain Layout

\family typewriter
temporarySpaceWeight = 0.3
\end_layout

\begin_layout Plain Layout

\family typewriter
[Other settings] 
\end_layout

\begin_layout Plain Layout

\family typewriter
vmBootTimeout = 120 
\end_layout

\begin_layout Plain Layout

\family typewriter
averageCompressionRatio = 0.5 
\end_layout

\begin_layout Plain Layout

\family typewriter
statusUpdateInterval = 5
\end_layout

\begin_layout Plain Layout

\family typewriter
[Image repository connection data] 
\end_layout

\begin_layout Plain Layout

\family typewriter
imageRepositoryIP = 192.168.0.5 
\end_layout

\begin_layout Plain Layout

\family typewriter
imageRepositoryPort = 3000
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Contenido-inicial-VM-1"

\end_inset

Contenido inicial del fichero 
\family typewriter
ClusterServer_settings.conf
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
En primer lugar, la sección 
\family typewriter
Database configuration
\family default
 especifica la información que se utilizará para configurar la base de datos
 del servidor de 
\emph on
cluster
\emph default
: la contraseña del usuario 
\emph on
root
\emph default
 y el nombre y la contraseña del usuario que empleará el demonio.
\end_layout

\begin_layout Standard
Por otra parte, la sección 
\family typewriter
Network configuration
\family default
 especifica la configuración de la conexión de control.
 En ella, se indicará si se desea cifrar el tráfico de esta conexión, la
 ruta de los certificados 
\family typewriter
server.crt
\family default
 y 
\family typewriter
server.key
\family default
 (sólo se utilizará cuando se cifra el tráfico) y el puerto asociado a la
 conexión de control.
\end_layout

\begin_layout Standard
Por otro lado, la sección 
\family typewriter
Load balancer configuration
\family default
 especifica los parámetros de configuración del algoritmo de balanceado
 de carga.
\end_layout

\begin_layout Standard
Asimismo, la sección 
\family typewriter
Other settings
\family default
 especifica
\end_layout

\begin_layout Itemize
el tiempo máximo que se esperará antes de generar un error de arranque de
 máquina virtual (en segundos).
\end_layout

\begin_layout Itemize
el ratio de compresión medio de las imágenes de disco.
 Este parámetro se utilizará para reservar espacio en disco en los servidores
 de máquinas virtuales y en el repositorio de imágenes en las operaciones
 de despliegue, creación, borrado y edición de imágenes.
\end_layout

\begin_layout Itemize
el intervalo de actualización del estado de la infraestructura (en segundos).
\end_layout

\begin_layout Standard
Finalmente, la sección 
\family typewriter
Image repository connection data
\family default
 especifica los datos de conexión al repositorio de imágenes.
\end_layout

\begin_layout Subsection
Servidor web
\begin_inset CommandInset label
LatexCommand label
name "sub:Instalacion-Servidor-web"

\end_inset


\end_layout

\begin_layout Subsubsection
Instalación del módulo de 
\emph on
CygnusCloud
\end_layout

\begin_layout Standard
Al igual que en los casos anteriores, la instalación del servidor web es
 análoga a la de la sección 
\begin_inset CommandInset ref
LatexCommand ref
reference "sub:Instalación-del-módulo"

\end_inset

, aunque en este caso
\end_layout

\begin_layout Itemize
el fichero 
\family typewriter
.tar.gz
\family default
 se llama 
\family typewriter
WebServer.tar.gz
\family default
, y
\end_layout

\begin_layout Itemize
el 
\emph on
script 
\family typewriter
\emph default
build.py
\family default
 genera dos ficheros, 
\family typewriter
webServerEndpoint.sh
\family default
 y 
\family typewriter
webServer.sh
\end_layout

\begin_layout Standard
Para arrancar el servidor web, hay que ejecutar cada uno de ellos en un
 proceso independiente.
 El primero, 
\family typewriter
webServerEndpoint.sh
\family default
, lanza el demonio que comunica la aplicación 
\family typewriter
web2py
\family default
 y el servidor de 
\emph on
cluster
\emph default
 (proceso 
\emph on
endpoint
\emph default
), y el segundo lanza el servidor web que aloja la aplicación 
\family typewriter
web2py
\family default
.
\end_layout

\begin_layout Subsubsection
Configuración del módulo de 
\emph on
CygnusCloud
\end_layout

\begin_layout Standard
Si intentamos arrancar el proceso 
\emph on
endpoint
\emph default
 sin haber inicializado previamente su fichero de configuración, se generará
 un mensaje de error.
 El fichero de configuración de este demonio, 
\family typewriter
Endpoint_settings.conf
\family default
, se encuentra en la raíz del directorio de instalación.
 Su contenido inicial aparece en la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Contenido-inicial-VM-1-1"

\end_inset

.
 
\end_layout

\begin_layout Standard
Debemos recordar que, tras inicializar el contenido de este fichero, debemos
 borrar o comentar la sección 
\family typewriter
Uninitialized file
\family default
.
 
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout Plain Layout

\family typewriter
# Comment or delete the following line after initializing this file 
\end_layout

\begin_layout Plain Layout

\family typewriter
[Uninitialized file]
\end_layout

\begin_layout Plain Layout

\family typewriter
[Database configuration] 
\end_layout

\begin_layout Plain Layout

\family typewriter
mysqlRootsPassword = 
\end_layout

\begin_layout Plain Layout

\family typewriter
websiteUser = website_user 
\end_layout

\begin_layout Plain Layout

\family typewriter
websiteUserPassword = CygnusCloud 
\end_layout

\begin_layout Plain Layout

\family typewriter
endpointUser = endpoint_user 
\end_layout

\begin_layout Plain Layout

\family typewriter
endpointUserPassword = CygnusCloud
\end_layout

\begin_layout Plain Layout

\family typewriter
[Network configuration] 
\end_layout

\begin_layout Plain Layout

\family typewriter
useSSL = False 
\end_layout

\begin_layout Plain Layout

\family typewriter
certificatePath = /home/luis/Infraestructura/Certificates
\end_layout

\begin_layout Plain Layout

\family typewriter
[Cluster server connection data] 
\end_layout

\begin_layout Plain Layout

\family typewriter
clusterServerIP = 192.168.0.5 
\end_layout

\begin_layout Plain Layout

\family typewriter
clusterServerListenningPort = 9000
\end_layout

\begin_layout Plain Layout

\family typewriter
[Other settings] 
\end_layout

\begin_layout Plain Layout

\family typewriter
statusDBUpdateInterval = 2 
\end_layout

\begin_layout Plain Layout

\family typewriter
minCommandInterval = 1 
\end_layout

\begin_layout Plain Layout

\family typewriter
commandTimeout = 300 
\end_layout

\begin_layout Plain Layout

\family typewriter
commandTimeoutCheckInterval = 10
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Contenido-inicial-VM-1-1"

\end_inset

Contenido inicial del fichero 
\family typewriter
Endpoint_settings.conf
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
En primer lugar, la sección 
\family typewriter
Database configuration
\family default
 especifica la información que se empleará para configurar las dos bases
 de datos que utilizará la aplicación web para interactuar con la infraestructur
a: 
\end_layout

\begin_layout Itemize
la contraseña del usuario 
\emph on
root
\emph default
, 
\end_layout

\begin_layout Itemize
el nombre y la contraseña del usuario que empleará el demonio, y
\end_layout

\begin_layout Itemize
el nombre y la contraseña del usuario que empleará la aplicación web.
\end_layout

\begin_layout Standard
Por otra parte, la sección 
\family typewriter
Network configuration
\family default
 especifica la configuración básica de la conexión de control.
 En ella, se indicará si se desea cifrar el tráfico de esta conexión y la
 ruta de los certificados 
\family typewriter
server.crt
\family default
 y 
\family typewriter
server.key
\family default
 (sólo se utilizará cuando se cifra el tráfico).
\end_layout

\begin_layout Standard
Por otro lado, la sección 
\family typewriter
Cluster server connection data
\family default
 especifica los parámetros de conexión al servidor de 
\emph on
cluster
\emph default
.
\end_layout

\begin_layout Standard
Finalmente, la sección 
\family typewriter
Other settings
\family default
 especifica
\end_layout

\begin_layout Itemize
el intervalo de actualización de las bases de datos (en segundos)
\end_layout

\begin_layout Itemize
el intervalo de tiempo que debe separar dos peticiones consecutivas del
 mismo usuario (en segundos)
\end_layout

\begin_layout Itemize
el tiempo máximo que tardarán todos los comandos en ejecutarse (en segundos),
 y
\end_layout

\begin_layout Itemize
el intervalo de espera del hilo de monitorización de comandos.
\end_layout

\begin_layout Section
Creación de imágenes base
\end_layout

\begin_layout Standard
Para poder utilizar el sistema, es necesario disponer de un conjunto de
 configuraciones base, que se utilizarán para crear el resto de configuraciones
 de la infraestructura.
 
\end_layout

\begin_layout Standard
En esta sección, mostraremos cómo crearlas de forma sencilla utilizando
 
\family typewriter
virt-manager
\family default
 e importarlas en 
\emph on
CygnusCloud
\emph default
.
 Naturalmente, también es posible importar a 
\emph on
CygnusCloud
\emph default
 imágenes creadas manualmente.
 No obstante, por claridad, en este manual 
\emph on
no
\emph default
 describiremos el proceso de creación manual de una imagen.
\end_layout

\begin_layout Subsection
Creación de nuevas imágenes en 
\family typewriter
virt-manager
\end_layout

\begin_layout Subsubsection
Pasos básicos 
\begin_inset CommandInset label
LatexCommand label
name "sub:Pasos-básicos-virt-manager"

\end_inset


\end_layout

\begin_layout Standard
Antes de utilizar 
\family typewriter
virt-manager
\family default
, es necesario instalarlo.
 Asumiendo que utilizamos Ubuntu 12.04, basta con ejecutar la orden
\end_layout

\begin_layout Standard
\noindent
\align center

\family typewriter
sudo apt-get install virt-manager
\end_layout

\begin_layout Standard
Acto seguido, lo ejecutamos.
 Aparecerá la pantalla inicial de la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Pantalla-inicial-virt-manager"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement h
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename graficos/Manual usuario/virt-manager/Pantalla inicial.png
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Pantalla-inicial-virt-manager"

\end_inset

Pantalla inicial de 
\family typewriter
virt-manager
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Para empezar, hacemos clic sobre el botón 
\family sans
Create a new virtual machine
\family default
.
 Aparecerá la primera ventana de la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Pasos-1-y-2-asistente-crear-mv"

\end_inset

.
 En todos los casos, avanzamos a la ventana siguiente haciendo clic sobre
 
\family sans
Forward
\family default
.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement h
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename graficos/Manual usuario/virt-manager/Botón crear máquina.png
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
Ubicación del botón 
\family sans
create a new virtual machine
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Los pasos a seguir son estos:
\end_layout

\begin_layout Enumerate
introducimos el nombre de la máquina virtual.
 
\end_layout

\begin_layout Enumerate
aparecerá la segunda ventana de la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Pasos-1-y-2-asistente-crear-mv"

\end_inset

, en la que tendremos que seleccionar 
\end_layout

\begin_deeper
\begin_layout Itemize
la ubicación del medio de instalación del sistema operativo
\end_layout

\begin_layout Itemize
el tipo del sistema operativo (
\family sans
Windows
\family default
, 
\family sans
Linux
\family default
,\SpecialChar \ldots{}
) y su versión
\end_layout

\end_deeper
\begin_layout Enumerate
aparecerá la primera ventana de la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Pasos-3-y-4-asistente-crear-mv"

\end_inset

, en la que tendremos que introducir el tamaño de la RAM y el número de
 CPUs virtuales de la máquina.
 
\end_layout

\begin_layout Enumerate
desmarcamos la casilla 
\family sans
Enable storage for this virtual machine
\family default
.
\end_layout

\begin_layout Enumerate
en la ventana final del asistente, que aparece en la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Paso-5-asistente-creación-máquinas-virtuales"

\end_inset

, marcamos la casilla 
\family sans
Customize configuration before install
\family default
, y hacemos clic en 
\family sans
Finish
\family default
.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement h
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename graficos/Manual usuario/virt-manager/Asistente-1.png
	scale 60

\end_inset


\begin_inset Graphics
	filename graficos/Manual usuario/virt-manager/Asistente-2.png
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Pasos-1-y-2-asistente-crear-mv"

\end_inset

Pasos 1 y 2 del asistente de creación de máquinas virtuales
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename graficos/Manual usuario/virt-manager/Asistente-3.png
	scale 60

\end_inset


\begin_inset Graphics
	filename graficos/Manual usuario/virt-manager/Asistente-4.png
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Pasos-3-y-4-asistente-crear-mv"

\end_inset

Pasos 3 y 4 del asistente de creación de máquinas virtuales
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename graficos/Manual usuario/virt-manager/Asistente-5.png
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Paso-5-asistente-creación-máquinas-virtuales"

\end_inset

Paso 5 del asistente de creación de máquinas virtuales
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage clearpage
\end_inset


\end_layout

\begin_layout Subsubsection
Configuración de la máquina virtual
\end_layout

\begin_layout Standard
Tras los pasos de la sección 
\begin_inset CommandInset ref
LatexCommand ref
reference "sub:Pasos-básicos-virt-manager"

\end_inset

, 
\family typewriter
virt-manager
\family default
 ya ha generado casi todo el fichero de definición de la máquina.
 No obstante, todavía debemos configurar
\end_layout

\begin_layout Itemize
las características de la CPU de la máquina virtual
\end_layout

\begin_layout Itemize
los discos duros virtuales
\end_layout

\begin_layout Itemize
los periféricos de entrada
\end_layout

\begin_layout Itemize
la tarjeta de vídeo
\end_layout

\begin_layout Standard
Cuando se cierra el asistente, aparecerá la ventana de la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Diálogo-de-configuración-máquina"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename graficos/Manual usuario/virt-manager/Configuración máquina virtual.png
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Diálogo-de-configuración-máquina"

\end_inset

Diálogo de configuración de la máquina virtual
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Empezaremos configurando la CPU de la máquina.
 Para ello, hacemos clic sobre 
\family sans
Processor
\family default
.
 Tras expandir el apartado 
\family sans
Configuration
\family default
, seleccionamos 
\family sans
Core2Duo
\family default
 como modelo.
 Todo debería quedar configurado como en la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Configuración-CPU-MV"

\end_inset

.
\end_layout

\begin_layout Standard
A continuación, crearemos las imágenes de disco 
\family typewriter
qcow2
\family default
 que utilizará la máquina.
 Tenemos que crear dos: 
\end_layout

\begin_layout Itemize
una que contendrá el sistema operativo y los programas instalados
\end_layout

\begin_layout Itemize
otra que contendrá los datos del usuario y el fichero de paginación
\end_layout

\begin_layout Standard
Para crearlas, hacemos clic sobre el botón 
\family sans
Add Hardware
\family default
 y seleccionamos 
\family sans
Storage
\family default
.
 El diálogo que aparece se muestra en la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Creación-imágenes-disco"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename graficos/Manual usuario/virt-manager/Configuración CPU.png
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Configuración-CPU-MV"

\end_inset

Configuración del procesador de la máquina virtual
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename graficos/Manual usuario/virt-manager/Imágenes disco.png
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Creación-imágenes-disco"

\end_inset

Creación de las imágenes de disco
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
A la hora de especificar el tamaño de ambas, debemos 
\end_layout

\begin_layout Itemize
escoger una familiar de máquinas virtuales, y
\end_layout

\begin_layout Itemize
seleccionar 
\family sans
Virtio disk
\family default
 en 
\family sans
Device type
\family default
 y 
\family typewriter
qcow2
\family default
 en 
\family sans
Storage format
\family default
.
\end_layout

\begin_layout Standard
Por otra parte, para configurar la tarjeta de vídeo hacemos clic sobre 
\family sans
Video
\family default
, y en 
\family sans
Model
\family default
 seleccionamos 
\family sans
vga
\family default
.
 Esto se muestra en la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Configuración-tarjeta-vídeo"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename graficos/Manual usuario/virt-manager/Configuración tarjeta vídeo.png
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Configuración-tarjeta-vídeo"

\end_inset

Configuración de la tarjeta de vídeo
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status collapsed

\begin_layout Plain Layout

\series bold
\color red
Importante
\end_layout

\begin_layout Plain Layout
Debido a un 
\emph on
bug
\emph default
 en el cargador de arranque, todas las distribuciones derivadas de Debian
 6 (
\emph on
squeeze
\emph default
) no pueden arrancar con la tarjeta de vídeo 
\family sans
vmvga
\family default
.
 En estos casos, es necesario seleccionar la tarjeta de vídeo 
\family sans
vga
\family default
.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Lo último que nos falta es añadir una tableta gráfica para que el servidor
 VNC siga adecuadamente los movimientos del ratón.
 Para ello, hacemos clic sobre 
\family sans
Add Hardware
\family default
, seleccionamos 
\family sans
Input
\family default
, seleccionamos 
\family sans
EvTouch USB Graphics Tablet
\family default
 y hacemos clic sobre 
\family sans
Finish
\family default
.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename graficos/Manual usuario/virt-manager/Configuración tableta.png
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Configuración-periféricos-entrada"

\end_inset

Configuración de los periféricos de entrada
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Para empezar la instalación del sistema operativo, hacemos clic sobre 
\family sans
Begin installation
\family default
.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status collapsed

\begin_layout Plain Layout

\series bold
\color red
Importante
\end_layout

\begin_layout Plain Layout
Para poder instalar un sistema operativo 
\emph on
Windows
\emph default
, hay que suministrar al instalador los drivers VirtIO.
 Mostraremos cómo hacer esto en la siguiente sección.
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Instalación de los 
\emph on
drivers
\emph default
 en 
\emph on
Windows
\end_layout

\begin_layout Standard
Para que el instalador pueda acceder a los discos duros virtuales, hay que
 suministrarle los controladores VirtIO.
 Los pasos a seguir son estos:
\end_layout

\begin_layout Enumerate
Descargamos la imagen ISO correspondiente a la última versión desde
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
\align center
\begin_inset CommandInset href
LatexCommand href
target "http://alt.fedoraproject.org/pub/alt/virtio-win/latest/images/bin/"

\end_inset

.
\end_layout

\end_deeper
\begin_layout Enumerate
A la hora de configurar la máquina, creamos otra unidad 
\family sans
CD-ROM IDE
\family default
.
 Para ello, basta con hacer clic sobre 
\family sans
Add hardware
\family default
, seleccionar 
\family sans
Storage
\family default
 y
\end_layout

\begin_deeper
\begin_layout Enumerate
marcar la casilla 
\family sans
Select managed or other existing storage
\family default
, e introducir la ruta de la imagen ISO que hemos descargado.
\end_layout

\begin_layout Enumerate
seleccionar 
\family sans
IDE cdrom
\family default
 en 
\family sans
Device type.
\end_layout

\end_deeper
\begin_layout Standard
En ocasiones, 
\family typewriter
virt-manager
\family default
 selecciona la nueva unidad de CD-ROM (y no la que tiene el medio de instalación
 de 
\emph on
Windows
\emph default
) para arrancar.
 Si eso ocurre, basta con volver a abrir el diálogo de configuración de
 la máquina (hacemos clic derecho sobre la máquina en la ventana principal
 de 
\family typewriter
virt-manager
\family default
, seleccionamos 
\family sans
Open
\family default
 y accedemos al menú 
\family sans
View \SpecialChar \menuseparator
 Details
\family default
 de la nueva ventana que aparece), seleccionar 
\family sans
Boot options
\family default
, marcar la casilla 
\family sans
Enable boot menu
\family default
 y seleccionar la unidad correcta al arrancar la máquina.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename graficos/Manual usuario/virt-manager/Drivers VirtIO.png
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Configuración-del-CD-ROM-VirtIO"

\end_inset

Configuración del CD-ROM con los drivers VirtIO
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename graficos/Manual usuario/virt-manager/Corrección bug arranque virt-manager.png
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Corrección-problemas-arranque-Windows"

\end_inset

Corrección de los problemas de arranque en instalaciones 
\emph on
Windows
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Importar imágenes existentes a 
\family typewriter
virt-manager
\end_layout

\begin_layout Standard
Siempre que una imagen de disco tenga instalado un sistema 
\emph on
Linux
\emph default
 y uno de los tamaños asociados a las imágenes del sistema operativo de
 las familias de máquinas virtuales 
\emph on
Linux
\emph default
, podrá utilizarse en 
\emph on
CygnusCloud
\emph default
.
 Los pasos a seguir son los siguientes:
\end_layout

\begin_layout Enumerate
se convierte la imagen de disco a un formato soportado por QEMU (
\family typewriter
raw
\family default
, 
\family typewriter
vmdk
\family default
 , 
\family typewriter
qcow2
\family default
 o 
\family typewriter
qcow2
\family default
).
 Por ejemplo, en el caso de una imagen de 
\emph on
VirtualBox
\emph default
, habría que ejecutar el comando 
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
\align center

\family typewriter
VBoxManage clonehd <fichero fuente>.vdi <fichero destino>.vmdk --format VMDK
\end_layout

\end_deeper
\begin_layout Enumerate
se convierte la imagen al formato 
\family typewriter
qcow2
\family default
.
 Para ello, ejecutaríamos la orden
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
\align center

\family typewriter
qemu-img convert <fichero fuente>.vmdk -O qcow2 <fichero destino>.qcow2
\end_layout

\end_deeper
\begin_layout Enumerate
en lugar de crear una nueva imagen para el sistema operativo, en el diálogo
 se importa la existente seleccionando la casilla 
\family sans
Select managed or other existing storage
\family default
 e indicando su ruta.
\end_layout

\begin_layout Enumerate
se crea una imagen de disco para almacenar los datos del usuario y el fichero
 de paginación.
\end_layout

\begin_layout Enumerate
tras arrancar la máquina virtual, se mueve el fichero de paginación y el
 directorio 
\family typewriter
/home
\family default
 a la imagen de disco correspondiente.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status collapsed

\begin_layout Plain Layout

\series bold
\color red
Importante
\series default
\color inherit
: este procedimiento no funcionará con imágenes de disco que utilicen el
 sistema operativo 
\emph on
Windows
\emph default
.
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Uso de 
\emph on
Samba
\emph default
 para configurar las imágenes
\end_layout

\begin_layout Standard
Para configurar el entorno de la máquina virtual, no sólo es posible descargar
 
\emph on
software 
\emph default
de internet: también es posible, utilizando 
\emph on
Samba
\emph default
, acceder a los recursos de la máquina anfitrión o de cualquier otro PC
 conectado a la misma red de área local que la máquina anfitrión.
\end_layout

\begin_layout Standard
En esta sección mostraremos cómo instalar y configurar 
\emph on
Samba
\emph default
 para que esto sea posible.
 Distinguiremos cuatro casos:
\end_layout

\begin_layout Itemize
el PC y la máquina virtual tienen instalado un sistema operativo 
\emph on
Windows
\emph default
.
 Llamaremos a este caso 
\series bold
compartición 
\emph on
Windows
\emph default
 a 
\emph on
Windows
\series default
\emph default
.
\end_layout

\begin_layout Itemize
el PC tiene instalado un sistema operativo 
\emph on
Windows
\emph default
, y la máquina virtual tiene instalado un sistema operativo 
\emph on
Linux
\emph default
.
 Llamaremos a este caso
\series bold
 compartición 
\emph on
Windows
\emph default
 a 
\emph on
Linux
\series default
\emph default
.
\end_layout

\begin_layout Itemize
el PC tiene instalado un sistema operativo 
\emph on
Linux
\emph default
, y la máquina virtual tiene instalado un sistema operativo 
\emph on
Windows
\emph default
.
 Llamaremos a este caso 
\series bold
compartición 
\emph on
Linux
\emph default
 a 
\emph on
Windows
\series default
\emph default
.
\end_layout

\begin_layout Itemize
el PC tiene instalado un sistema operativo 
\emph on
Linux
\emph default
, y la máquina virtual tiene instalado un sistema operativo 
\emph on
Linux
\emph default
.
 Llamaremos a este caso 
\series bold
compartición 
\emph on
Linux
\emph default
 a 
\emph on
Linux
\series default
\emph default
.
\end_layout

\begin_layout Standard
Antes de empezar, mostraremos qué hace falta instalar en las imágenes 
\emph on
Linux 
\emph default
que utilicen distribuciones derivadas de Debian o Ubuntu.
 En las imágenes 
\emph on
Windows
\emph default
, no es necesario instalar nada.
\end_layout

\begin_layout Subsubsection
Prerrequisitos (sólo en 
\emph on
Linux
\emph default
)
\end_layout

\begin_layout Paragraph
Máquina virtual
\end_layout

\begin_layout Standard
Si la máquina virtual utiliza un sistema operativo 
\emph on
Linux
\emph default
, habrá que instalar todo lo necesario para que se convierta en un cliente
 
\emph on
Samba
\emph default
.
 Para ello, basta con ejecutar la orden
\end_layout

\begin_layout Standard
\noindent
\align center

\family typewriter
sudo apt-get install smbclient smbfs
\end_layout

\begin_layout Paragraph
PC
\end_layout

\begin_layout Standard
Si el PC tiene instalado un sistema operativo 
\emph on
Linux
\emph default
, habrá que instalar todo lo necesario para que se convierta en un servidor
 
\emph on
Samba
\emph default
.
 Para ello, ejecutaremos la orden
\end_layout

\begin_layout Standard
\noindent
\align center

\family typewriter
sudo apt-get install samba
\end_layout

\begin_layout Standard
Después, editamos el fichero 
\family typewriter
/etc/samba/smb.conf
\family default
, descomentando las líneas
\end_layout

\begin_layout Standard
\noindent
\align center

\family typewriter
security = user
\end_layout

\begin_layout Standard
y
\end_layout

\begin_layout Standard
\noindent
\align center

\family typewriter
workgroup = WORKGROUP
\end_layout

\begin_layout Standard
Para terminar, definimos una contraseña para nuestro usuario.
 
\emph on
Samba
\emph default
 no nos obliga a utilizar nuestro propio usuario: podemos crear a propósito
 un usuario para 
\emph on
Samba
\emph default
.
 De todas formas, lo más sencillo es utilizar el que ya tenemos.
 El comando que tenemos que escribir es
\end_layout

\begin_layout Standard
\noindent
\align center

\family typewriter
sudo smbpasswd -a <nuestro nombre de usuario>
\end_layout

\begin_layout Standard
Esta orden nos pedirá la nueva contraseña.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status collapsed

\begin_layout Plain Layout

\series bold
\color red
Importante
\series default
\color inherit
: si omitimos este paso, no será posible montar ninguna carpeta compartida.
 Este error es muy difícil de detectar.
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Compartición de 
\emph on
Windows
\emph default
 a 
\emph on
Windows
\emph default
 
\begin_inset CommandInset label
LatexCommand label
name "sub:Compartición-Windows-a-Windows"

\end_inset


\end_layout

\begin_layout Paragraph
Configuración del PC
\end_layout

\begin_layout Standard
Para compartir una carpeta en 
\emph on
Windows
\emph default
, basta con seguir estos pasos:
\end_layout

\begin_layout Enumerate
hacemos clic derecho sobre la carpeta que queremos compartir y seleccionamos
 
\family sans
Propiedades
\family default
.
\end_layout

\begin_layout Enumerate
vamos a la pestaña 
\family sans
Compartir
\family default
 y hacemos clic sobre el botón 
\family sans
Uso compartido avanzado
\end_layout

\begin_layout Enumerate
marcamos la casilla 
\family sans
Compartir esta carpeta
\family default
.
 Por defecto, sólo se permite leer de ella.
 En la parte superior del diálogo, aparecerá un nombre de la forma
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
\align center

\family typewriter

\backslash

\backslash
nombre-del-pc
\backslash

\color blue
nombre-del-recurso
\end_layout

\begin_layout Standard
Debemos recordar el nombre del recurso: nos hará falta más adelante.
\end_layout

\end_deeper
\begin_layout Enumerate
si queremos escribir en la carpeta desde otra máquina, basta con hacer clic
 sobre 
\family sans
Permisos
\family default
 y marcar la casilla 
\family sans
Control total
\family default
.
\end_layout

\begin_layout Paragraph
Configuración de la máquina virtual
\end_layout

\begin_layout Standard
Para conectarnos a la carpeta compartida desde la máquina virtual, seguimos
 estos pasos:
\end_layout

\begin_layout Enumerate
hacemos clic sobre 
\family sans
Equipo
\family default
, y seleccionamos 
\family sans
Conectar a unidad de red
\family default
.
\end_layout

\begin_layout Enumerate
en el diálogo que aparece, metemos este nombre para la máquina:
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
\align center

\family typewriter

\backslash

\backslash
ip-del-pc
\backslash
nombre-del-recurso
\end_layout

\end_deeper
\begin_layout Enumerate
confirmamos los cambios.
 A partir de este momento, la carpeta compartida aparecerá montada en 
\family sans
Equipo
\family default
 como una unidad de red.
\end_layout

\begin_layout Subsubsection
Compartición de 
\emph on
Linux
\emph default
 a 
\emph on
Linux
\emph default
 
\begin_inset CommandInset label
LatexCommand label
name "sub:Compartición-Linux-a-Linux"

\end_inset


\end_layout

\begin_layout Paragraph
Configuración del PC
\end_layout

\begin_layout Standard
Para compartir la carpeta, seguimos los siguientes pasos:
\end_layout

\begin_layout Enumerate
añadimos una entrada como la siguiente 
\emph on
al final
\emph default
 del fichero 
\family typewriter
/etc/samba/smb.conf
\family default
:
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
\align center
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "50col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout Plain Layout

\family typewriter
[nombre-del-recurso]         
\end_layout

\begin_layout Plain Layout

\family typewriter
\begin_inset space \quad{}
\end_inset

comment = <comentario>         
\end_layout

\begin_layout Plain Layout

\family typewriter
\begin_inset space \quad{}
\end_inset

read only = yes | no         
\end_layout

\begin_layout Plain Layout

\family typewriter
\begin_inset space \quad{}
\end_inset

guest ok = yes | no  
\end_layout

\begin_layout Plain Layout

\family typewriter
\begin_inset space \quad{}
\end_inset

browsable = yes         
\end_layout

\begin_layout Plain Layout

\family typewriter
\begin_inset space \quad{}
\end_inset

force user = <nuestro usuario>        
\end_layout

\begin_layout Plain Layout

\family typewriter
\begin_inset space \quad{}
\end_inset

path = <ruta de la carpeta compartida> 
\end_layout

\end_inset


\end_layout

\begin_layout Standard
donde
\end_layout

\begin_layout Itemize

\family typewriter
nombre-del-recurso
\family default
 es el nombre que queremos asignar a la carpeta compartida (como 
\family typewriter
home
\family default
, 
\family typewriter
mis_datos
\family default
,...).
 Por seguridad, 
\emph on
no
\emph default
 metáis aquí espacios ni caracteres especiales.
\end_layout

\begin_layout Itemize

\family typewriter
comment
\family default
 contiene una descripción de la carpeta compartida.
 Si está vacío, no aparece nada a la derecha del símbolo 
\family typewriter
=
\family default
.
\end_layout

\begin_layout Itemize

\family typewriter
read only
\family default
 fija los permisos de lectura y escritura.
 Cuando toma el valor 
\family typewriter
yes
\family default
, no se podrá escribir en la carpeta desde la máquina virtual.
 Cuando toma el valor 
\family typewriter
no
\family default
, sí.
\end_layout

\begin_layout Itemize

\family typewriter
guest ok
\family default
 determina el comportamiento para los usuarios no autenticados.
 Cuando toma el valor 
\family typewriter
yes
\family default
, cualquiera podrá leer de la carpeta.
 Cuando toma el valor 
\family typewriter
no
\family default
, sólo los usuarios que se autentiquen podrán leer la carpeta.
\end_layout

\end_deeper
\begin_layout Enumerate
reiniciamos el servidor 
\emph on
Samba
\emph default
.
 Para ello, ejecutamos la orden
\end_layout

\begin_layout Standard
\noindent
\align center

\family typewriter
sudo /etc/init.d/smbd restart
\end_layout

\begin_layout Paragraph
Configuración de la máquina virtual
\end_layout

\begin_layout Standard
Para montar la carpeta compartida en la máquina virtual, seguimos los siguientes
 pasos:
\end_layout

\begin_layout Enumerate
creamos el punto de montaje.
 Por ejemplo, si queremos montar la carpeta en 
\family typewriter
/mnt/smbshare
\family default
, ejecutaremos el comando 
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
\align center

\family typewriter
sudo mkdir /mnt/smbshare
\end_layout

\end_deeper
\begin_layout Enumerate
montamos la carpeta utilizando el comando 
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
\align center

\family typewriter
sudo mount -t cifs -o username=<nombre de usuario>,password=<contraseña>
 //ip-del-pc/nombre-del-recurso <punto de montaje>
\end_layout

\end_deeper
\begin_layout Enumerate
para desconectarnos de la carpeta compartida, basta con ejecutar el comando
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
\align center

\family typewriter
sudo umount --force <punto de montaje>
\end_layout

\end_deeper
\begin_layout Subsubsection
Compartición de 
\emph on
Windows
\emph default
 a 
\emph on
Linux
\end_layout

\begin_layout Standard
Para configurar el PC, seguimos las instrucciones de la sección 
\begin_inset CommandInset ref
LatexCommand ref
reference "sub:Compartición-Windows-a-Windows"

\end_inset

.
 Para configurar la máquina virtual, seguimos las instrucciones de la sección
 
\begin_inset CommandInset ref
LatexCommand ref
reference "sub:Compartición-Linux-a-Linux"

\end_inset

.
\end_layout

\begin_layout Subsubsection
Compartición de 
\emph on
Linux
\emph default
 a 
\emph on
Windows
\end_layout

\begin_layout Standard
Para configurar el PC, seguimos las instrucciones de la sección 
\begin_inset CommandInset ref
LatexCommand ref
reference "sub:Compartición-Linux-a-Linux"

\end_inset

.
 Para configurar la máquina virtual, seguimos las instrucciones de la sección
 
\begin_inset CommandInset ref
LatexCommand ref
reference "sub:Compartición-Windows-a-Windows"

\end_inset

.
\end_layout

\begin_layout Subsection
Importar imágenes a 
\emph on
CygnusCloud
\end_layout

\begin_layout Standard
Una vez preparadas las imágenes de disco de las máquinas virtuales, tenemos
 que borrar las unidades de CD-ROM que hemos utilizado para realizar la
 instalación del sistema operativo, y también la tarjeta de sonido.
 Los pasos a seguir son los siguientes:
\end_layout

\begin_layout Enumerate
accedemos al diálogo de configuración de la máquina.
 Para ello, hacemos clic derecho sobre la máquina en la ventana principal
 de 
\family sans
virt-manager
\family default
, seleccionamos 
\family sans
Open
\family default
 y accedemos al menú 
\family sans
View \SpecialChar \menuseparator
 Details
\family default
.
\end_layout

\begin_layout Enumerate
hacemos clic derecho sobre las unidades de CD-ROM y seleccionamos 
\family sans
Remove hardware
\family default
.
\end_layout

\begin_layout Enumerate
hacemos lo mismo con la tarjeta de sonido, que aparece en la sección 
\family sans
sound: ich6
\family default
.
\end_layout

\begin_layout Standard
Una vez hecho esto, 
\end_layout

\begin_layout Enumerate
creamos un directorio.
\end_layout

\begin_layout Enumerate
copiamos el fichero de definición de la máquina, ubicado en 
\family typewriter
/etc/libvirt/qemu
\family default
, a dicho directorio.
\end_layout

\begin_layout Enumerate
copiamos las dos imágenes de disco 
\family typewriter
qcow2
\family default
 a dicho directorio.
 Acto seguido, las renombramos de la siguiente manera:
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Formula 
\[
\textrm{Imagen del sistema operativo}\longrightarrow\texttt{OS.qcow2}
\]

\end_inset


\begin_inset Formula 
\[
\textrm{Imagen restante}\longrightarrow\texttt{Data.qcow2}
\]

\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
creamos un fichero 
\family typewriter
zip
\family default
 que contenga el fichero de definición y las dos imágenes de disco 
\family typewriter
qcow2
\family default
 
\emph on
renombradas
\emph default
.
 Estos archivos 
\emph on
deben estar ubicados en la raíz del fichero comprimido
\emph default
.
\end_layout

\begin_deeper
\begin_layout Standard
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout Plain Layout

\series bold
\color red
Importante
\series default
\color inherit
: si 
\end_layout

\begin_layout Itemize
no se respetan los nombres de los ficheros 
\family typewriter
qcow2
\family default
, incluyendo la distinción entre mayúsculas y minúsculas, o 
\end_layout

\begin_layout Itemize
los tres archivos no están en la raíz del fichero comprimido
\end_layout

\begin_layout Plain Layout
la infraestructura 
\series bold
no
\series default
 podrá utilizar la imagen.
\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
subimos el fichero 
\family typewriter
.zip
\family default
 al repositorio de imágenes mediante la utilidad de transferencia de imágenes.
 Su última versión está disponible en
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
\align center
\begin_inset CommandInset href
LatexCommand href
name "http://cygnusclouducm.wordpress.com/descargas/"
target "http://cygnusclouducm.wordpress.com/descargas/"

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status collapsed

\begin_layout Plain Layout

\series bold
\color red
Importante
\series default
\color inherit
: hay que anotar el identificador devuelto por la utilidad de conexión.
\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
abrimos el fichero 
\family typewriter
cc/clusterServer/database/ClusterServerDB.sql
\family default
, siendo 
\family typewriter
cc
\family default
 el directorio de instalación del servidor de 
\emph on
cluster
\emph default
.
 Acto seguido, añadimos la línea
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
\align center

\family typewriter
INSERT IGNORE INTO VanillaImageFamilyOf VALUES (IDi, IDf);
\end_layout

\begin_layout Standard
al final del mismo.
 
\family typewriter
IDi
\family default
 es el identificador de imagen que ha devuelto la utilidad de conexión,
 e 
\family typewriter
IDf
\family default
 es el identificador de la familia de máquinas virtuales a la que está asociada
 la imagen.
 El fichero 
\family typewriter
.sql
\family default
 contiene la definición de todas las familias de máquinas virtuales.
\end_layout

\end_deeper
\begin_layout Enumerate
abrimos el fichero 
\family typewriter
ws/ClusterEndpoint/databases/ClusterEndpointDB.sql
\family default
, donde 
\family typewriter
ws
\family default
 es el directorio de instalación del servidor web.
 Acto seguido, añadimos al final de ese fichero la línea
\end_layout

\begin_deeper
\begin_layout Standard
\noindent
\align center
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "80col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout Plain Layout

\family typewriter
INSERT IGNORE INTO Image VALUES 
\end_layout

\begin_layout Plain Layout

\family typewriter
\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset

(IDi, IDf, 'Nombre imagen', 'Descripción imagen',
\end_layout

\begin_layout Plain Layout

\family typewriter
\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset


\begin_inset space ~
\end_inset

ID_osf, ID_osv, 1, 0);
\end_layout

\end_inset


\end_layout

\begin_layout Standard
siendo 
\family typewriter
ID_osf
\family default
 el identificador de la familia de sistemas operativos a la que pertenece
 la imagen, e 
\family typewriter
ID_osv
\family default
 el identificador de la variante del sistema operativo que utiliza la imagen.
 Estos valores se extraen de las tablas 
\family typewriter
OSFamily
\family default
 y 
\family typewriter
OSVariant
\family default
, ya rellenadas.
\end_layout

\end_deeper
\begin_layout Enumerate
reiniciamos la infraestructura.
 A partir de este momento, podremos utilizar la imagen como base para crear
 otras nuevas.
\end_layout

\begin_layout Section
Uso de la página web
\end_layout

\begin_layout Subsection
Instalación y uso del 
\shape italic
framework
\shape default
 
\family typewriter
web2py
\end_layout

\begin_layout Standard
La web de 
\shape italic
CygnusCloud
\shape default
 se ha desarrollado utilizando el 
\shape italic
framework
\shape default
 
\family typewriter
web2py
\family default
.
 Para poder utilizar este 
\emph on
framework
\emph default
 no es necesario realizar ningún tipo de instalación adicional a la indicada
 en la sección 
\begin_inset CommandInset ref
LatexCommand ref
reference "sub:Instalacion-Servidor-web"

\end_inset

.
 El fichero 
\family typewriter
.tar.gz 
\family default
ya incluye la última versión estable de 
\family typewriter
web2py
\family default
 (2.5.1) y la aplicación web de 
\emph on
CygnusCloud 
\emph default
integrada.
 No obstante, si se quiere descargar una versión diferente será necesario
 seguir los siguientes pasos:
\end_layout

\begin_layout Enumerate
Nos conectamos a 
\begin_inset Flex URL
status collapsed

\begin_layout Plain Layout

http://www.web2py.com/init/default/download
\end_layout

\end_inset

 y descargamos la versión deseada.
 Es posible descargar versiones para 
\emph on
Linux
\emph default
, 
\emph on
Windows
\emph default
 o Mac OS, aunque para poder ejecutar 
\emph on
CygnusCloud 
\emph default
sólo puede usarse la versión de 
\emph on
Linux
\emph default
.
 También es posible elegir entre 3 tipos de descargas de cara al uso que
 se quiera hacer de 
\family typewriter
web2py
\family default
.
 En nuestro caso, usaremos la opción
\family typewriter
 For Normal Users
\family default
.
\end_layout

\begin_layout Enumerate
descomprimimos el fichero descargado y lo copiamos al directorio de instalación
 que queramos.
\end_layout

\begin_layout Enumerate
copiamos el directorio 
\family typewriter
web2py/applications/CygnusCloud
\family default
 del 
\emph on
tarball que aportamos
\emph default
 al directorio de instalación de web2py.
\end_layout

\begin_layout Enumerate
copiamos los directorios 
\family typewriter
bin
\family default
 y 
\family typewriter
certificates
\family default
, el script 
\family typewriter
build.py
\family default
 y los ficheros de configuración al directorio donde se haya descomprimido
 la versión de web2py (que contendrá un directorio con el nombre web2py).
\end_layout

\begin_layout Enumerate
realizamos la instalación tal y como se menciona en la sección 
\begin_inset CommandInset ref
LatexCommand ref
reference "sub:Instalacion-Servidor-web"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout Plain Layout

\series bold
\color red
Importante
\end_layout

\begin_layout Plain Layout
el 
\emph on
tarball 
\emph default
que hemos publicado ya incluye una versión de 
\family typewriter
web2py
\family default
 estable y configurada.
 Sólo tendrán que seguir este procedimiento aquellos usuarios que quieran
 utilizar una versión diferente del 
\emph on
framework
\emph default
 
\family typewriter
web2py
\family default
.
\end_layout

\end_inset


\end_layout

\begin_layout Standard

\family typewriter
web2py
\family default
 ofrece una interfaz para el desarrollo de aplicaciones web accesible desde
 cualquier navegador.
 Tras realizar la instalación y ejecutar el script 
\family typewriter
webServer.sh
\family default
 podremos utilizarla siguiendo estos pasos:
\end_layout

\begin_layout Enumerate
introducimos la 
\family typewriter
URL
\family default
 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

http://127.0.0.1:8000/
\end_layout

\end_inset

 en un navegador web.
 
\end_layout

\begin_layout Enumerate
Se cargará una página con el título 
\family sans
\shape italic
Welcome
\family default
\shape default
.
 Hacemos clic sobre el botón 
\family sans
Administrative Interface
\family default
, situado a la derecha de esta ventana.
 
\end_layout

\begin_layout Enumerate
En la siguiente página, escribiremos la contraseña de administrador (
\family typewriter
cygnuscloud
\family default
) y pulsaremos el botón de inicio de sesión.
\end_layout

\begin_layout Enumerate
Llegados a este punto nos aparece un escritorio como el que se muestra en
 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Escritorio-de-aplicaciones-web2py"

\end_inset

, con el nombre de las aplicaciones que podemos gestionar desde 
\family typewriter
web2py
\family default
.
 Sobre 
\family sans
CygnusCloud
\family default
, seleccionamos la opción 
\family sans
Manage \SpecialChar \menuseparator
 editar.
\end_layout

\begin_layout Enumerate
se cargará una página con el título 
\family sans
Editar aplicación 
\begin_inset Quotes eld
\end_inset

CygnusCloud
\begin_inset Quotes erd
\end_inset

.
 
\family default
En esta página podemos ver todo el código fuente de la web de 
\emph on
CygnusCloud
\emph default
 organizado en secciones según su finalidad: modelos, controladores, vistas,
 lenguajes, ficheros estáticos, módulos secundarios, ficheros privados y
 
\emph on
plugins
\emph default
.
\end_layout

\begin_layout Enumerate
A la izquierda de cada fichero hay un botón 
\family sans
editar 
\family default
que nos permite modificar el fichero de código correspondiente.
 Igualmente si queremos visualizar el contenido del fichero sin editarlo
 podemos pulsar directamente sobre su nombre.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename graficos/Manual usuario/webServer/PaginaAdministracionWeb2py.png
	scale 40
	rotateOrigin center

\end_inset


\end_layout

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Escritorio-de-aplicaciones-web2py"

\end_inset

Interfaz administrativa de web2py
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Uso de la web
\end_layout

\begin_layout Subsubsection
Páginas de acceso público
\end_layout

\begin_layout Standard
Tras instalar el 
\emph on
tarball
\emph default
 y ejecutar los 
\emph on
scripts 
\emph default
de arranque del servidor web y del endpoint, podemos acceder a la página
 de inicio de sesión de 
\emph on
CygnusCloud
\emph default
 introduciendo la 
\family typewriter
URL
\family default
 
\begin_inset Flex URL
status collapsed

\begin_layout Plain Layout

http://127.0.0.1:8000/CygnusCloud/main/login
\end_layout

\end_inset

 en cualquier navegador web.
 La figura
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:MU-Pagina_inicio_sesion"

\end_inset

 muestra una captura de pantalla de esta página.
 
\end_layout

\begin_layout Standard
En ella, debemos introducir el correo electrónico y la contraseña del usuario
 que va a iniciar sesión.
 
\end_layout

\begin_layout Standard
Por defecto, existen tres usuarios de prueba registrados en el sistema:
\end_layout

\begin_layout Itemize
un estudiante con correo electrónico 
\family typewriter
Student1@ucm.es
\family default
 y contraseña 
\family typewriter
1234
\family default
, 
\end_layout

\begin_layout Itemize
un profesor con correo electrónico 
\family typewriter
Teacher01@ucm.es
\family default
 y contraseña 
\family sans
1234, y
\end_layout

\begin_layout Itemize
un administrador con correo electrónico 
\family typewriter
Admin1@ucm.es
\family default
 y contraseña 
\family typewriter
1234
\family default
.
\end_layout

\begin_layout Standard
Además, desde esta página también es posible 
\end_layout

\begin_layout Itemize
acceder a diferentes direcciones institucionales tales como el campus virtual
 o la página web de la UCM, y
\end_layout

\begin_layout Itemize
visualizar los últimos 
\shape italic
tweets
\shape default
 de la cuenta 
\family typewriter
@CygnusCloud
\end_layout

\begin_layout Standard
Una vez iniciada la sesión, independientemente del tipo de usuario que la
 inicie, en la parte superior derecha de la página aparece el nombre del
 usuario cuya sesión se ha iniciado y una opción 
\family typewriter
Salir
\family default
 que permite cerrar la sesión actual.
 Cuando un usuario cierre la sesión, regresará a la página de inicio.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename graficos/Manual usuario/webServer/PaginaInicioCygnusCloud.png
	scale 40
	rotateOrigin center

\end_inset


\end_layout

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:MU-Pagina_inicio_sesion"

\end_inset

Página de inicio de 
\emph on
CygnusCloud
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Desde la barra de menú de acceso público, también es posible acceder a la
 página de 
\family typewriter
Acerca de, 
\family default
en la cual se incluye un breve resumen sobre que es 
\shape italic
CygnusCloud
\shape default
 y para que sirve.
 También aparece en esta página información de interés sobre el desarrollo
 de 
\shape italic
CygnusCloud
\shape default
, tales como entrevistas, notas de prensas o premios recibidos.
\end_layout

\begin_layout Subsubsection
Páginas accesibles para los estudiantes
\end_layout

\begin_layout Standard
Tras iniciar sesión como un estudiante, la aplicación web nos muestra una
 página como la de la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:MU-Pagina_arranque_alumno"

\end_inset

, en la cual aparecen todas las asignaturas matriculadas por el estudiante.
 Para cada asignatura, se indica las máquinas creadas por el profesor de
 dicha asignatura.
 
\end_layout

\begin_layout Standard
El estudiante puede seleccionar cualquiera de las máquinas que se le muestran.
 Cuando se selecciona, aparece una breve descripción sobre dicha máquina
 y un botón 
\family typewriter
Arrancar
\family default
.
 
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename graficos/Manual usuario/webServer/PaginaArranqueMVAlumno.png
	scale 40

\end_inset


\end_layout

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:MU-Pagina_arranque_alumno"

\end_inset

Página de arranque de máquinas virtuales por un estudiante
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Una vez el estudiante ha seleccionado la máquina que quiere arrancar y ha
 pulsado sobre el botón 
\family typewriter
Arrancar
\family default
, se abre una nueva pestaña en la cual comienza a ejecutarse el escritorio
 de trabajo de la máquina arrancada.
 La figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:MU-Pagina_MV_Arrancada"

\end_inset

 muestra la página con el escritorio de trabajo arrancado.
 
\end_layout

\begin_layout Standard
En esta página, además del escritorio de trabajo, se incluye un par de botones
 que permiten enviar una señal de apagado a la máquina y poner el escritorio
 en pantalla completa.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename graficos/Manual usuario/webServer/PaginaNoVNCAlumno.png
	scale 40

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:MU-Pagina_MV_Arrancada"

\end_inset

Página con el escritorio remoto de una máquina virtual arrancada por un
 estudiante
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
Además, el estudiante podrá gestionar sus máquinas arrancadas por medio
 de las páginas de detención y apertura de máquinas arrancadas (
\family sans
Máquinas arrancadas \SpecialChar \menuseparator
Detener máquina y Máquinas arrancadas \SpecialChar \menuseparator
Abrir maquina)
\family default
.
 La forma de proceder en ambas páginas es similar.
 Una vez haya accedido a alguna de las páginas, se le muestra una lista
 con todas las máquinas que tiene arrancadas.
 Al seleccionar cualquiera de ellas aparece la descripción de la máquina
 y los botones con las acciones que puede realizar sobre dicha máquina.
 En el caso de la página de detención, se muestra un botón que permite detener
 la máquina y otro que permite forzar el reinicio.
 En el caso de la página de apertura, aparece un único botón que permite
 abrir una nueva pestaña con el escritorio de alguna de las máquinas en
 ejecución.
 La figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "MU-Pagina_detencion_MV_Alumno"

\end_inset

 muestra una captura de la página de detención.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\begin_inset Graphics
	filename graficos/Manual usuario/webServer/PaginaDetencionMVAlumno.png
	scale 40

\end_inset


\end_layout

\begin_layout Plain Layout
\noindent
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "MU-Pagina_detencion_MV_Alumno"

\end_inset

Página de detención de máquinas virtuales en ejecución para los estudiantes
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout Plain Layout

\series bold
\color red
Importante
\end_layout

\begin_layout Itemize
para poder arrancar una máquina virtual, un administrador debe haber arrancado
 previamente al menos uno de los servidores de máquinas virtuales en los
 que se encuentra.
\end_layout

\begin_layout Itemize
para que el rendimiento del visor de escritorio remoto sea adecuado, es
 imprescindible utilizar la última versión de 
\emph on
Google Chrome, Mozilla Firefox, Internet Explorer
\emph default
 o 
\emph on
Safari
\emph default
.
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Páginas accesibles para los profesores
\end_layout

\begin_layout Standard
Una vez que el profesor ha iniciado sesión, la primera página que se le
 muestra es la página de arranque de máquinas virtuales.
 El manejo de esta página, al igual que las páginas de detención y apertura
 de máquinas virtuales arrancadas (
\family typewriter
Máquinas arrancadas \SpecialChar \menuseparator
Detener máquina y Máquinas arrancadas \SpecialChar \menuseparator
Abrir maquina
\family sans
) 
\family default
es similar al explicado en la sección de estudiantes, por lo que no se repetirá
 en esta sección.
\end_layout

\begin_layout Standard
La página de creación de imágenes (
\family typewriter
Crear y editar \SpecialChar \menuseparator
 Crear nueva máquina
\family sans
) 
\family default
permite a los profesores crear nuevas imágenes sobre las cuales instalarán
 las herramientas necesarias para poder ser utilizadas por los estudiantes
 matriculados en una de las asignaturas que imparten.
 Para llevar a cabo la creación de una imagen, el profesor debe indicar
 un nombre y una descripción que se les mostrará a los estudiantes.
 Además, debe seleccionar una imagen base sobre la cual instalará las herramient
as necesarias.
 Las imágenes bases se distinguen por el sistema operativo instalado en
 ellas y los recursos que se le proporcionan a cada una.
 Es posible filtrar la lista de imágenes bases por su sistema operativo.
 Una vez rellenados todos los campos, el profesor debe pulsar sobre el botón
 
\family sans
Crear máquina virtual 
\family default
para enviar la petición de creación
\family sans
.
\end_layout

\begin_layout Standard
La figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "MU-Pagina_creacion_MV_Profesor"

\end_inset

 muestra un ejemplo de creación de una máquina virtual 
\emph on
Windows
\emph default
.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename graficos/Manual usuario/webServer/PaginaCreacionMVProfesor.png
	scale 40

\end_inset


\end_layout

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "MU-Pagina_creacion_MV_Profesor"

\end_inset

Página de creación de máquinas virtuales para los profesores
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
La página de edición de imágenes (
\family typewriter
Crear y editar \SpecialChar \menuseparator
 Editar máquina
\family sans
) permite a los profesores editar sus máquinas ya creadas.
 
\end_layout

\begin_layout Standard
En esta página aparecen dos tablas donde se muestran el conjunto de todas
 las máquinas asociadas a las asignaturas impartidas por el profesor.
 La primera tabla contiene el conjunto de máquinas detenidas.
 
\end_layout

\begin_layout Standard
Una máquina detenida puede ser:
\end_layout

\begin_layout Itemize
Máquina que aun no se ha comenzado a editar
\end_layout

\begin_layout Itemize
Máquina que se ha editado, se ha detenido, pero aun no se han aplicado sus
 cambios.
\end_layout

\begin_layout Standard
La segunda tabla muestra el conjunto de máquinas en ejecución.
 En esta página una máquina en ejecución es:
\end_layout

\begin_layout Itemize
Máquina que se ha ejecutado para ser editada
\end_layout

\begin_layout Standard
Según el estado en el que se encuentre una máquina, al seleccionarla, se
 mostrará unos botones u otros.
 
\end_layout

\begin_layout Standard
Por ejemplo, la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "MU-Pagina_edicion_MV_Profesor"

\end_inset

 muestra la página de edición de un profesor.
 En ella podemos observar las dos tablas.
 En la primera se ha seleccionado una máquina que ya se ha editado anteriormente
 y ha sido detenida.
 Las opciones que se le ofrece al profesor en este caso son seguir editando
 la máquina o aplicar los cambios para hacerlos visibles a los estudiantes.
 En la segunda tabla se ha seleccionado una máquina en edición que aun no
 se ha detenido.
 Las dos posibilidades que tiene en este caso el profesor son abrir la máquina
 en una pestaña nueva o detenerla.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename graficos/Manual usuario/webServer/PaginaEdicionMaquinasProfesor.png
	scale 40

\end_inset


\end_layout

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "MU-Pagina_edicion_MV_Profesor"

\end_inset

Página de edición de máquinas virtuales para los profesores
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
Por último la página de asociación de asignaturas (
\family typewriter
Asociar asignatura
\family default
) permite al profesor indicar desde cual de las asignaturas que imparte
 va a ser accesible la imagen que está editando.
 Esta página esta formada por dos apartados.
 En el superior el profesor puede seleccionar una de las imágenes en edición
 y asociarle una asignatura pulsando sobre el botón 
\family typewriter
Asociar asignatura.
\end_layout

\begin_layout Standard
En el inferior el profesor puede buscar las asignaturas ya asociadas a alguna
 de las imágenes en edición y desvincularla.
\end_layout

\begin_layout Standard
La figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "MU-Pagina_asociacion_asignaturas_profesor"

\end_inset

 muestra una captura de esta página.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename graficos/Manual usuario/webServer/PaginaAsociacionAsignaturasProfesor.png
	scale 40

\end_inset


\end_layout

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "MU-Pagina_asociacion_asignaturas_profesor"

\end_inset

Página de asociación de asignaturas a máquinas por el profesor
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Páginas accesibles para los administradores
\end_layout

\begin_layout Standard
Al iniciar sesión como administrador, la primera página que se muestra es
 la página de arranque de máquinas virtuales (
\family typewriter
Máquinas virtuales \SpecialChar \menuseparator
 Arrancar).
 
\family default
La forma de proceder en esta página, al igual que en la página de detención
 y apertura de máquinas virtuales en ejecución
\family typewriter
 (Máquinas virtuales \SpecialChar \menuseparator
 Detener y Máquinas virtuales \SpecialChar \menuseparator
 Abrir) 
\family default
resulta similar que en el caso de las páginas de estudiantes con una diferencia,
 como un administrador puede gestionar cualquier máquina virtual existente
 en el sistema, independientemente de quien la haya creado, es necesario
 añadir un cuadro de búsqueda en la parte superior de la página que permita
 filtrar el número de máquinas que se muestran.
\end_layout

\begin_layout Standard
La página de edición de máquinas (
\family typewriter
Máquinas virtuales \SpecialChar \menuseparator
 
\family default
Editar) permite al administrador tomar ciertas decisiones acerca de las
 máquinas virtuales creadas en el sistema.
 Así, desde esta página, un administrador puede:
\end_layout

\begin_layout Itemize
Eliminar una imagen de toda la infraestructura
\end_layout

\begin_layout Itemize
Eliminar una imagen de un determinado servidor de máquinas virtuales
\end_layout

\begin_layout Itemize
Desplegar automáticamente un imagen.
 Con esta opción, será el sistema el que decida en que servidores de máquinas
 virtuales se desplegará la máquina.
\end_layout

\begin_layout Itemize
Desplegar una imagen en un determinado servidor de máquinas virtuales.
\end_layout

\begin_layout Standard
La figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "MU-Pagina_edicion_MV_administrador"

\end_inset

 muestra la página de edición de máquinas virtuales.
 Al igual que en las páginas anteriores, en la parte superior, podemos observar
 un cuadro de búsqueda que nos permita filtrar el número de máquinas sobre
 las que buscar la máquina que va a ser editada.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename graficos/Manual usuario/webServer/PaginaEdicionMVAdministrador.png
	scale 40

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "MU-Pagina_edicion_MV_administrador"

\end_inset

Página de edición de máquinas virtuales para el administrador
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
Con respecto a los servidores, los administradores pueden crear y editar
 servidores por medio de las páginas correspondientes (
\family typewriter
Administrar servidores \SpecialChar \menuseparator
 Añadir servidor y Administrar servidores \SpecialChar \menuseparator
 Editar
 servidor
\family default
 respectivamente).
\end_layout

\begin_layout Standard
Para crear un nuevo servidor, el administrador deberá indicar el nombre
 de dicho servidor, único en toda la infraestructura, la dirección IP y
 el puerto por el cual se conectará el servidor de máquinas virtuales.
 También, debe indicar, si el servidor será capaz de albergar imágenes base
 o no.
 Una vez indicado todo esto, la petición de creación del servidor se enviará
 pulsando sobre el botón 
\family typewriter
Añadir servidor.
\end_layout

\begin_layout Standard
En cuanto a la página de edición de servidores, el administrador puede seleccion
ar el servidor cuyo contenido quiere modificar.
 Una vez seleccionado, debe pulsar sobre el botón 
\family typewriter
Buscar servidor 
\family default
para que se le muestre la información asociada a dicho servidor.
 Según el estado en el que se encuentre el servidor seleccionado, el administrad
or podrá aplicar unas operaciones u otras.
\end_layout

\begin_layout Standard
En la figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "MU-Pagina_edicion_servidores_Administrador"

\end_inset

 se muestra la página de edición de servidores.
 En ella, ya se ha buscado la información sobre el servidor con nombre 
\family typewriter
Server1
\family default
 y se le ha ofrecido al administrador ciertas opciones.
 En este caso, el administrador podría:
\end_layout

\begin_layout Itemize
Cambiar los datos sobre el nombre, puerto, IP e imagen base del servidor.
\end_layout

\begin_layout Itemize
Eliminar el servidor de la infraestructura
\end_layout

\begin_layout Itemize
Arrancar el servidor
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename graficos/Manual usuario/webServer/PaginaEdicionServidoresAdministrador.png
	scale 40

\end_inset


\end_layout

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "MU-Pagina_edicion_servidores_Administrador"

\end_inset

Página de edición de servidores para los administradores
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
Los administradores también pueden consultar el estado en el que se encuentra
 los distintos servidores y el repositorio por medio de la página correspondient
e (
\family typewriter
Administrar servidores \SpecialChar \menuseparator
 Estado del sistema).
 
\family default
Entendemos como estado, al consumo de recursos de cada uno de los servidores
 y del repositorio en un momento dado.
\end_layout

\begin_layout Standard
Para consultar el estado de un servidor concreto deberá seleccionarse dicho
 servidor en la lista y pulsar sobre el botón 
\family typewriter
Mostrar estado.
 
\end_layout

\begin_layout Standard
La figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "MU-Pagina_estado_Administrador"

\end_inset

 muestra el estado del servidor Server1 y del repositorio sin ninguna máquina
 virtual arrancada.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename graficos/Manual usuario/webServer/PaginaEstadoServidoresAdministrador.png
	scale 40

\end_inset


\end_layout

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "MU-Pagina_estado_Administrador"

\end_inset

Página que muestra el estado del sistema
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
La última página de gestión de servidores permite detener por completo la
 infraestructura, apagando todos los servidores del sistema (
\family typewriter
Administrar servidores \SpecialChar \menuseparator
 Parar infraestructura).
 
\family default
Esta página esta formada únicamente por una casilla que permite indicar
 si debe esperarse a que se apaguen todas las máquinas en ejecución para
 apagar por completo la infraestructura y un botón que permite enviar la
 petición de apagado.
\end_layout

\begin_layout Standard
La figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "MU-Pagina_detencion_sistema_Administrador"

\end_inset

 muestra la página de detención de la infraestructura.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\begin_inset Graphics
	filename graficos/Manual usuario/webServer/PaginaDetencionInfraestructuraAdministrador.png
	scale 40

\end_inset


\end_layout

\begin_layout Plain Layout
\noindent
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "MU-Pagina_detencion_sistema_Administrador"

\end_inset

Página de detención de la infraestructura por el administrador
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Note
status collapsed

\begin_layout Plain Layout
Valorar si meter la captura de detención de infraestructura según el número
 de capturas total
\end_layout

\end_inset


\end_layout

\begin_layout Standard
El administrador también puede gestionar los usuarios dados de alta en la
 web.
 Así, la aplicación web dispone de páginas para la creación y eliminación
 de usuarios (
\family typewriter
Administrar usuarios \SpecialChar \menuseparator
 Añadir
\family default
 y 
\family typewriter
Administrar usuarios \SpecialChar \menuseparator
 Eliminar
\family default
 respectivamente).
 Para añadir un nuevo usuario, el administrador deberá indicar el correo
 electrónico con el cual accederá el usuario al sistema, la contraseña asociada
 y el tipo de usuario (estudiante, profesor o administrador).
 Opcionalmente, puede adjuntar una fotografía del usuario.
\end_layout

\begin_layout Standard
En cuanto a la página de eliminación consta de un cuadro superior de búsqueda
 que permite filtrar el grupo de usuarios por su nombre o tipo de usuario.
 Una vez realizada la búsqueda, se mostrará una lista de usuarios resultante.
 Para eliminar el usuario deseado, simplemente se debe seleccionar dicho
 usuario en la lista y pulsar sobre el botón 
\family typewriter
Eliminar seleccionado
\family default
.
 La figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "MU-Pagina_eliminacion_usuarios_Administrador"

\end_inset

 muestra una captura de la página de eliminación de usuarios.
 
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\begin_inset Graphics
	filename graficos/Manual usuario/webServer/PaginaEliminacionUsuariosAdministrador.png
	scale 40

\end_inset


\end_layout

\begin_layout Plain Layout
\noindent
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "MU-Pagina_eliminacion_usuarios_Administrador"

\end_inset

Página de eliminación de usuarios por parte de un administrador
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Una vez creado un usuario, el administrador puede matricularlo en algún
 grupo de asignatura por medio de la página de asociación de asignaturas
 (
\family typewriter
Administrar usuario \SpecialChar \menuseparator
 Asociar asignatura
\family default
).
 Al igual que la mayoría de las páginas del administrador, esta página dispone
 de un cuadro de búsqueda que permite buscar el usuario que quiere matricularse
 en un determinado grupo de asignatura.
 Una vez encontrado el usuario, deberá indicarse el código y el grupo de
 clase del grupo de asignatura en el cual va a ser matriculado el usuario.
 Todos los grupos de asignaturas tienen asociados un número de plazas disponible
s.
 Antes de asociar un usuario a una determinado grupo, se comprueba que este
 grupo no se encuentre lleno.
 
\end_layout

\begin_layout Standard
Por último, el administrador también disponen de una par de páginas para
 crear y eliminar grupos de asignaturas (
\family typewriter
Administrar asignatura \SpecialChar \menuseparator
 Añadir
\family default
 y 
\family typewriter
Administrar asignatura \SpecialChar \menuseparator
 Eliminar
\family default
 respectivamente).
 Para crear un nuevo grupo de asignatura, el administrador deberá indicar
 el nombre de la asignatura que se impartirá en dicho grupo, el código único
 asociado a dicha asignatura, el año lectivo en el que va a ser cursado
 dicho grupo, el número de plazas disponibles y el grupo de clase asociado.
\end_layout

\begin_layout Standard
Para eliminar un grupo de asignatura existente se procederá de forma análoga
 a como se indico en la eliminación de usuarios.
\end_layout

\begin_layout Subsubsection
Gestión de notificaciones
\end_layout

\begin_layout Standard
Como algunas de las operaciones que ofrece 
\shape italic
CygnusCloud
\shape default
 deben ser gestionadas por medio de peticiones, ya que su realización no
 es inmediata y no podemos tener al usuario esperando mientras se completa
 dicha operación, es necesario ofrecer a los usuarios un sistema de notificacion
es en el cual puedan consultar los mensajes que le envíe el sistema sobre
 la finalización errónea o no de las peticiones enviadas.
 
\end_layout

\begin_layout Standard
Cuando el usuario reciba una notificación, aparecerá un etiqueta en la parte
 superior derecha de la página similar a la que se muestra en la figura
 
\begin_inset CommandInset ref
LatexCommand ref
reference "MU-Etiqueta_Notificaciones"

\end_inset

.
 Esta etiqueta permanecerá mientras el usuario no lea las notificaciones
 pendientes en la página de notificaciones.
 
\end_layout

\begin_layout Standard
Para acceder a la página de notificaciones, el usuario puede pulsar sobre
 la etiqueta o bien acceder desde la barra de menú (sección 
\family typewriter
Notificaciones
\family default
).
 
\end_layout

\begin_layout Standard
Una vez el usuario a consultado sus notificaciones pendientes, estas desaparecer
án de la página para dejar paso a las nuevas notificaciones que puedan recibirse.
\end_layout

\begin_layout Standard
La figura 
\begin_inset CommandInset ref
LatexCommand ref
reference "MU-Pagina_Notificaciones"

\end_inset

 muestra un ejemplo de página con notificaciones.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename graficos/Manual usuario/webServer/EtiquetaNotificaciones.png
	scale 50

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "MU-Etiqueta_Notificaciones"

\end_inset

Etiqueta de notificaciones pendientes en la web
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename graficos/Manual usuario/webServer/PaginaNotificaciones.png
	scale 40

\end_inset


\end_layout

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "MU-Pagina_Notificaciones"

\end_inset

Página de visualización de notificaciones
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Despliegue de la aplicación web
\end_layout

\begin_layout Standard
Aunque 
\family typewriter
\shape italic
\emph on
web2py
\family default
\shape default
\emph default
 ofrece su propio servidor web para mantener las aplicaciones que se hayan
 desarrollado, este servidor está más orientado a que los usuarios puedan
 realizar en él pruebas de depuración de las aplicaciones.
 
\end_layout

\begin_layout Standard
Si el usuario quiere desplegar su aplicación para que pueda ser usado por
 los clientes tendrá que buscar algún otro tipo de servidor destinado a
 este fin.
\end_layout

\begin_layout Standard

\family typewriter
web2py
\family default
 ofrece la posibilidad de migrar sus aplicaciones web para ser utilizadas
 bajo un servidor 
\family typewriter
Apache
\family default
.
 Con este fin, 
\family typewriter
web2py
\family default
 ofrece un par de 
\shape italic
scripts
\shape default
 de configuración, bajo el directorio 
\family typewriter
/web2py/scripts
\family default
, que permite instalar todos los paquetes necesarios para poder realizar
 el cambio de servidor.
 
\end_layout

\begin_layout Standard
Podemos encontrar dos 
\shape italic
scripts
\shape default
 diferentes:
\end_layout

\begin_layout Itemize

\family typewriter
setup-web2py-fedora.sh
\family default
 (para realizar la instalación en Fedora Core).
\end_layout

\begin_layout Itemize

\family typewriter
setup-web2py-ubuntu.sh
\family default
 (para la instalación en Ubuntu).
\end_layout

\begin_layout Standard
Si lo prefiere, el usuario puede realizar la instalación de forma manual
 siguiendo las especificaciones detalladas en el manual de referencia de
 
\family typewriter
web2py
\family default
 
\begin_inset CommandInset citation
LatexCommand cite
key "Web2PyBook"

\end_inset

.
\end_layout

\end_body
\end_document
